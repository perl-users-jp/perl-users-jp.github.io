<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Ruby1.8で学ぶ、簡単?!記号プログラミング - Articles Advent Calendar 2010 Sym</title>
        <meta name="title" content="Ruby1.8で学ぶ、簡単?!記号プログラミング - Articles Advent Calendar 2010 Sym">
        <meta name="description" content="">
        <meta name="author" content="">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/4">
        <meta property="og:title" content="Ruby1.8で学ぶ、簡単?!記号プログラミング - Articles Advent Calendar 2010 Sym">
        <meta property="og:description" content="">
        <meta property="og:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Ruby1.8%E3%81%A7%E5%AD%A6%E3%81%B6%E3%80%81%E7%B0%A1%E5%8D%98%3F%21%E8%A8%98%E5%8F%B7%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0,co_rgb:000000,w_900,c_fit//v1601626948/og-perl-users-jp.png">

        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/4">
        <meta property="twitter:title" content="Ruby1.8で学ぶ、簡単?!記号プログラミング - Articles Advent Calendar 2010 Sym">
        <meta property="twitter:description" content="">
        <meta property="twitter:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Ruby1.8%E3%81%A7%E5%AD%A6%E3%81%B6%E3%80%81%E7%B0%A1%E5%8D%98%3F%21%E8%A8%98%E5%8F%B7%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0,co_rgb:000000,w_900,c_fit//v1601626948/og-perl-users-jp.png">

        <link rel="icon" href="/img/favicon.ico">
        <link rel="canonical" href="https://perl-users.jp/articles/advent-calendar/2010/sym/4">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.min.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <header class="site-header">
    <a href="/" class="logo">Perl-users.jp</a>
</header>

        <main class="entry">
        <h1 class="entry-title">Ruby1.8で学ぶ、簡単?!記号プログラミング</h1>
        <div class="entry-tags">
        </div>
            <div class="entry-date">2010-12-04</div>

        <div class="entry-text">
            <p>全国のプログラマーの皆さま、こんにちは！<a href="http://twitter.com/takesako">id:TAKESAKO</a>です。</p><p>記号プログラミングってなかなか面白そうだけど、自分にはなんか難しすぎて到底理解できない代物だ…なんて思っていないでしょうか？ →それはたぶん大きな勘違いです。</p><p>今日は、初心者にわかりやすいと大変評判なプログラミング言語Rubyバージョン1.8を使って、簡単お手軽記号プログラミングを体験してみましょう。</p>

<div class="section">
    <h3>1. 記号だけで顔文字出力</h3>
    <p>Ruby1.8で以下のプログラムを実行すると標準出力に顔文字「(>_<)/」が表示されます。</p>

    <pre class="code prettyprint">$&gt;&lt;&lt;&#34;(&gt;_&lt;)/&#34;;</pre>
<p>これだと1文字ずつ順に追っていけば全部読めるので簡単そうですよね。</p>

</div>
<div class="section">
    <h3>2. $>の解説</h3>
    <p>このプログラムの動作を解説すると、$>は標準出力STDOUTのエイリアスを意味し</p>

    <pre class="code prettyprint">STDOUT &lt;&lt; &#34;(&gt;_&lt;)/&#34;;</pre>
<p>と同等の動作となります。</p><p>STDOUTの<<メソッドを呼び出すと右側の引数を文字列として渡して標準出力に書き込みます。</p><p>これはC++言語でいうところのstd::coutの使い方に相当します。</p>

    <pre class="code prettyprint">#include &lt;iostream&gt;
void main()
{
　　　　std::cout &lt;&lt; &#34;(&gt;_&lt;)/&#34;;
}</pre>
<p>このようにRubyは記号の文字だけを用いて、任意の記号を簡単に出力することができるのです。</p>

</div>
<div class="section">
    <h3>3. 記号だけで任意の数値を作る方法</h3>
    <p>次に、プログラマーが一番最初に作る「Hello, world!」を出力するプログラムを記号だけで書いてみようと思うのですが、ここで問題になるのが「H」や「e」の文字をどうやって記号だけで生成するかです。</p><p>実はRuby1.8で「?a」と書くと'a'のASCIIコード97の数値が返ります。?の右側には印字可能な文字であれば何でも書けて、「?b」は98、「?c」は99の数値リテラルを意味します。</p><p>ということは、?の右側に記号も書くことができて「?!」と書くと'!'のASCIIコード33が返るのです。これらのASCIIコードは普通に数値リテラルとして解釈されるため「?!+?!」のように足し算を行うことができ66の数値が生成できます。</p><p>これを応用して足し算や引き算を組み合わせると、すべての数値を記号だけで表現することができます。</p>

    <pre class="code prettyprint">NUL: (?!-?!) == 0
SOH: (?&#34;-?!) == 1
STX: (?#-?!) == 2
ETX: (?$-?!) == 3
EOT: (?%-?!) == 4
ENQ: (?&amp;-?!) == 5
ACK: (?&#39;-?!) == 6
\a : (?(-?!) == 7
\b : (?)-?!) == 8
\t : (?*-?!) == 9
\n : (?+-?!) == 10
\v : (?,-?!) == 11
\f : (?--?!) == 12
\r : (?.-?!) == 13
SO: (?/-?!) == 14
SI : (?:-?+) == 15
DLE: (?:-?*) == 16
DC1: (?:-?)) == 17
DC2: (?:-?() == 18
DC3: (?:-?&#39;) == 19
DC4: (?:-?&amp;) == 20
NAK: (?:-?%) == 21
SYN: (?:-?$) == 22
ETB: (?:-?#) == 23
CAN: (?:-?&#34;) == 24
EM : (?:-?!) == 25
SUB: (?;-?!) == 26
ESC: (?&lt;-?!) == 27
FS : (?=-?!) == 28
GS : (?&gt;-?!) == 29
RS : (??-?!) == 30
US : (?@-?!) == 31
   : (?[-?;) == 32
 ! : (?!) == 33
 &#34; : (?&#34;) == 34
 # : (?#) == 35
 $ : (?$) == 36
 % : (?%) == 37
 &amp; : (?&amp;) == 38
 &#39; : (?&#39;) == 39
 ( : (?() == 40
 ) : (?)) == 41
 * : (?*) == 42
 + : (?+) == 43
 , : (?,) == 44
 - : (?-) == 45
 . : (?.) == 46
 / : (?/) == 47
 0 : (?[-?+) == 48
 1 : (?[-?*) == 49
 2 : (?[-?)) == 50
 3 : (?[-?() == 51
 4 : (?[-?&#39;) == 52
 5 : (?[-?&amp;) == 53
 6 : (?[-?%) == 54
 7 : (?[-?$) == 55
 8 : (?[-?#) == 56
 9 : (?[-?&#34;) == 57
 : : (?:) == 58
 ; : (?;) == 59
 &lt; : (?&lt;) == 60
 = : (?=) == 61
 &gt; : (?&gt;) == 62
 ? : (??) == 63
 @ : (?@) == 64
 A : (?{-?:) == 65
 B : (?!+?!) == 66
 C : (?!+?&#34;) == 67
 D : (?!+?#) == 68
 E : (?!+?$) == 69
 F : (?!+?%) == 70
 G : (?!+?&amp;) == 71
 H : (?!+?&#39;) == 72
 I : (?!+?() == 73
 J : (?!+?)) == 74
 K : (?!+?*) == 75
 L : (?!+?+) == 76
 M : (?!+?,) == 77
 N : (?!+?-) == 78
 O : (?!+?.) == 79
 P : (?!+?/) == 80
 Q : (?&#34;+?/) == 81
 R : (?#+?/) == 82
 S : (?$+?/) == 83
 T : (?%+?/) == 84
 U : (?&amp;+?/) == 85
 V : (?&#39;+?/) == 86
 W : (?(+?/) == 87
 X : (?)+?/) == 88
 Y : (?*+?/) == 89
 Z : (?++?/) == 90
 [ : (?[) == 91
 \ : (?\) == 92
 ] : (?]) == 93
 ^ : (?^) == 94
 _ : (?_) == 95
 ` : (?`) == 96
 a : (?!+?@) == 97
 b : (?&#34;+?@) == 98
 c : (?#+?@) == 99
 d : (?$+?@) == 100
 e : (?%+?@) == 101
 f : (?&amp;+?@) == 102
 g : (?&#39;+?@) == 103
 h : (?(+?@) == 104
 i : (?)+?@) == 105
 j : (?*+?@) == 106
 k : (?++?@) == 107
 l : (?,+?@) == 108
 m : (?-+?@) == 109
 n : (?.+?@) == 110
 o : (?/+?@) == 111
 p : (?!+?!+?.) == 112
 q : (?!+?!+?/) == 113
 r : (?!+?&#34;+?/) == 114
 s : (?!+?#+?/) == 115
 t : (?:+?:) == 116
 u : (?:+?;) == 117
 v : (?:+?&lt;) == 118
 w : (?:+?=) == 119
 x : (?:+?&gt;) == 120
 y : (?:+??) == 121
 z : (?:+?@) == 122
 { : (?{) == 123
 | : (?|) == 124
 } : (?}) == 125
 ~ : (?~) == 126
DEL: (?!+?^) == 127</pre>
<p>Ruby1.8、すごいですね。まさに記号プログラミングのために生まれてきたような言語です。</p>

</div>
<div class="section">
    <h3>4. 数値から文字列を作る</h3>
    <p>数値だけ生成できても「Hello」の文字列に変換できないと嬉しくないので、数値から文字列を生成する方法を次に考えます。</p><p>Rubyには文字列に対して<<メソッドを呼ぶと右側の引数が数値の場合、その数値に相当するASCIIコードの文字を追加して返すという面白い仕様があります。<br />
数値に対して<<メソッドを呼ぶとシフト演算になりますが、文字列の場合は以下のような動きになります。</p>

    <pre class="code prettyprint">&#34;&#34;&lt;&lt;88
# =&gt; &#34;&#34;+sprintf(&#34;%c&#34;,88)
# =&gt; &#34;&#34;+&#34;X&#34;
# =&gt; &#34;X&#34;</pre>
<p>これはメソッドチェーンのように複数回<<メソッドを適用することが可能なので、</p>

    <pre class="code prettyprint">&#34;&#34;&lt;&lt;88&lt;&lt;89&lt;&lt;90
# =&gt; &#34;X&#34;&lt;&lt;89&lt;&lt;90
# =&gt; &#34;XY&#34;&lt;&lt;90
# =&gt; &#34;XYZ&#34;</pre>
<p>のように書けます。</p>

</div>
<div class="section">
    <h3>5. 記号だけで任意の文字列を出力する</h3>
    <p>ということは「Hello, world!\n」の文字列をASCIIコードに分解すると</p>

    <pre class="code prettyprint">&#34;&#34;&lt;&lt;72&lt;&lt;101&lt;&lt;108&lt;&lt;108&lt;&lt;111&lt;&lt;44&lt;&lt;32&lt;&lt;119&lt;&lt;111&lt;&lt;114&lt;&lt;108&lt;&lt;100&lt;&lt;33&lt;&lt;10
# =&gt; &#34;Hello, world!\n&#34;</pre>
<p>のように書けます。</p><p>これらの数値はすべて記号から生成できることがわかっていますので</p>

    <pre class="code prettyprint">&#34;&#34;&lt;&lt;(?!+?&#39;)&lt;&lt;(?%+?@)&lt;&lt;(?,+?@)&lt;&lt;(?,+?@)&lt;&lt;(?/+?@)&lt;&lt;(?,)&lt;&lt;(?[-?;)&lt;&lt;(?:+?=)&lt;&lt;(?/+?@)&lt;&lt;(?!+?&#34;+?/)&lt;&lt;(?,+?@)&lt;&lt;(?$+?@)&lt;&lt;(?!)&lt;&lt;(?+-?!)
# =&gt; &#34;Hello, world!\n&#34;</pre>
<p>と書きなおせば記号だけで文字列を構成することができます。</p>

</div>
<div class="section">
    <h3>6. 記号だけで「Hello, world!\n」完成</h3>
    <p>メソッド呼び出しの適用順序を気を付けていれば無駄な括弧を省略することができますので「$><<"Hello, world!\n"」を記号のみで書きなおすと、以下のプログラムになります。</p>

    <pre class="code prettyprint">$&gt;&lt;&lt;(&#39;&#39;&lt;&lt;?!+?&#39;&lt;&lt;?%+?@&lt;&lt;?,+?@&lt;&lt;?,+?@&lt;&lt;?/+?@&lt;&lt;?,&lt;&lt;?[-?;&lt;&lt;?:+?=&lt;&lt;?/+?@&lt;&lt;?!+?&#34;+?/&lt;&lt;?,+?@&lt;&lt;?$+?@&lt;&lt;?!&lt;&lt;?+-?!)</pre>
<p>ね、簡単でしょ？</p>

</div>
<div class="section">
    <h3>8. 次回予告</h3>
    <p>しかし「?a」でASCIIコード97の数値が返ってくるという素晴らしい機能はRuby1.9以降からは廃止されて長さ1の文字列"a"を返すように仕様変更されてしまいました。<br />
なので、ここで示したコードは最新のRubyでは動作しません。せっかく頑張ったのに悲しいですね。</p><p>次回はRuby1.9以降のバージョンで任意の文字列を出力する方法について解説してみようと思います。</p>

</div>
<div class="section">
    <h3>9. 参考文献</h3>
    
<ul>
<li><a href="http://mono.kmc.gr.jp/~oxy/d/?date=20050901">[Ruby] rrencode - PRoxy Diary(2005-09-01)</a></li>
<li><a href="http://www.ruby-lang.org/ja/man/html/Ruby_A4C7BBC8A4EFA4ECA4EBB5ADB9E6A4CEB0D5CCA3.html">Rubyで使われる記号の意味（正規表現の複雑な記号は除く）</a></li>
<li><a href="http://taichino.com/programming/1088">rrencodeを理解した &laquo;  taichino.com</a></li>
</ul>
</div>
        </div>
        </main>
        <footer class="site-footer">
    <nav>
        <a href="https://github.com/perl-users-jp/perl-users-jp.github.io" target="_blank" rel="noopener">
            <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        </a>
    </nav>
    <p>
        <a href="/">Perl-users.jp</a> - 日本のPerlユーザーのためのハブサイトです。日本の Perl ユーザーに最新の情報を届けることを目的にしています。
    </p>
    <p>
    文章のライセンスは、特に明記が無い限りすべて <a href="http://creativecommons.org/licenses/by/2.0/">CC-by</a>でおねがいします。
    </p>
</footer>

        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
