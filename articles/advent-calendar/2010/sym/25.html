<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>全部入り記号Polyglotでメリークリスマス！ - Articles Advent Calendar 2010 Sym</title>
        <meta name="title" content="全部入り記号Polyglotでメリークリスマス！ - Articles Advent Calendar 2010 Sym">
        <meta name="description" content="">
        <meta name="author" content="takesako">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/25">
        <meta property="og:title" content="全部入り記号Polyglotでメリークリスマス！ - Articles Advent Calendar 2010 Sym">
        <meta property="og:description" content="">
        <meta property="og:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:%E5%85%A8%E9%83%A8%E5%85%A5%E3%82%8A%E8%A8%98%E5%8F%B7Polyglot%E3%81%A7%E3%83%A1%E3%83%AA%E3%83%BC%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%9E%E3%82%B9%EF%BC%81,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:takesako,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/25">
        <meta property="twitter:title" content="全部入り記号Polyglotでメリークリスマス！ - Articles Advent Calendar 2010 Sym">
        <meta property="twitter:description" content="">
        <meta property="twitter:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:%E5%85%A8%E9%83%A8%E5%85%A5%E3%82%8A%E8%A8%98%E5%8F%B7Polyglot%E3%81%A7%E3%83%A1%E3%83%AA%E3%83%BC%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%9E%E3%82%B9%EF%BC%81,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:takesako,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <link rel="icon" href="/img/favicon.ico">
        <link rel="canonical" href="https://perl-users.jp/articles/advent-calendar/2010/sym/25">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.min.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <header class="site-header">
    <a href="/" class="logo">Perl-users.jp</a>
</header>

        <main class="entry">
        <h1 class="entry-title">全部入り記号Polyglotでメリークリスマス！</h1>
        <div class="entry-tags">
            <a class="entry-tag" href='/tag/sym'>#sym</a>
            <a class="entry-tag" href='/tag/x86'>#x86</a>
            <a class="entry-tag" href='/tag/Perl'>#Perl</a>
            <a class="entry-tag" href='/tag/Ruby'>#Ruby</a>
            <a class="entry-tag" href='/tag/JavaScript'>#JavaScript</a>
        </div>
            <div class="entry-author">takesako</div>
            <div class="entry-date">2010-12-25</div>

        <div class="entry-text">
            <p>今日でいよいよ最終日になりました。<a href="http://developer.cybozu.co.jp/takesako/">id:TAKESAKO</a>です。</p><p>ネタで始まった記号トラックですが、執筆いただいたみなさんのおかげで全日程達成することができました。ありがとうございます。</p><p>感謝の意を込めて、今までの<a href="/articles/advent-calendar/2010/sym/">記号プログラミング</a>の成果をすべて一つにまとめてみましょう。</p>

<div class="section">
    <h3>polyglot.com</h3>
    <p><iframe width="495" height="200" src="/articles/advent-calendar/2010/sym/polyglot.com"></iframe></p><p>このファイルを<a href="/articles/advent-calendar/2010/sym/polyglot.com">polyglot.com</a>という名前で保存しておきます。</p>

    <pre class="code prettyprint">C:\&gt; more polyglot.com
;&#34;#{&#34;,$/*&#34;;}&#34;;&#39;%@@%!!`[_][_]_[-&#34;[-[;-!:-$,`________-;^-?_-_^-%}`]]]]]]]])--{--=^-~}-=?`^_^]^_^-+{--}-;`-:}`^_^]^_^-|--!#-!!-!&#34;`^_^]^_^-#]-@&#34;-{.-:=`^_^]^_^-^#-[^-{;-{[`^_^]^_^-+:-){-~}-~]`^_^]^_^-;;-{=-{]-[@`^_^]^_^-.!-.--}/-|``^_^]^_^-@{-$|-:|-^]`^_^]^_^-(+-@{-!.-|+`^_^]^_^-_%-$;-/}-@``^_^]^_^-,}-!(-}!-:!`^_^]^_^-[_-:.-(=-==`^_^]^_^-.:-/~-[(-_/`^_^]^_^-//-:.-,#-+,`^_^]^_^-=#-(^-($-```^_^]^_^-;{-|;-)&#34;-+!`^_^]^_^-.(-)}-|,-./`^_^]^_^-&#34;,-{,-}{-.[`^_^]^_^-[;-{.-}&#34;-[=`^_^]^_^-~.-,&#34;-$:-?|`^_^]^_^-~!-){-@--~[`^_^]^_^-({-:&#34;-[^-[/`^_^]^_^-](-$`-~`-[``^_^]^_^-#|-};-=/-%)`^_^]^_^??&#39;;%#;$^_=&#39;/[@./^-_[_&amp;@|(_)^]-?,}[{`!,{|`.:-,]&#34;.|`&#39;,$^_^=&#39;_))@[|`:)-_`?@-@-)@^_]}[(`|+%@~__@|~@^[&#39;,$^_=~(&#39;(?{$^_=~&#39;.(&#39;_^&#34;&#34;&#39;^&#39;+,|/&#39;.&#34;-&#34;.(&#39;$%&#39;^&#39;;{&#39;.&#39;(-:^;&#39;.(&#39;[)]@&#39;^&#39;&gt;_&lt;,&#39;).&#39;$^_})&#39;)))#;_=[*&#39;`&#39;..%.~.]*%;;;$_=%+%++(??%?===???_[(_=~/\{/).-@+(_=~/~/)]:%%%&lt;&lt;(?!*(?+-?()));_=([*%/!/..%!/!]+[*%]:]..%)@)]+[*%.[...%.`.]+[*%.{...%.}.])*%(=~_~=&#39;_&#39;);$&gt;&lt;&lt;$_%(/\)=~_~=&#39;_&#39;\*=/=~_)+$_%(/_&#39;,/=~_)+$_%(/~=&#39;_&#39;\./=~_)+$_%(/~=&#39;_&#39;\./=~_)+$_%(/~=&#39;_&#39;\//=~_)+$_%(/&#39;&amp;/=~_)+$_%(/=&#39;_&#39;%/=~_)+$_%(/=~_~=&#39;_&#39;\+/=~_)+$_%(/\.=~_~=&#39;_&#39;\//=~_)+$_%(/&#39;,/=~_)+$_%(/~=&#39;_&#39;\//=~_)+$_%(/&#39;_&#39;%/=~_)+%))#*/=&#39;&#39;[_=((_=&#39;&#39;+-~-~&#39;&#39;)+{})[-~_*_]+(_+{})[_]+(_+{}._)[_]+(_+![])[_*_]+(_+!&#39;&#39;)[_/_]+(_+!&#39;&#39;)[_]+(&#39;&#39;+!&#39;&#39;)[_]+(_+{})[-~_*_]+(_+!&#39;&#39;)[_/_]+(_+{})[_]+(_+!&#39;&#39;)[_]][_](_[_][_]((_=-~-~&#39;&#39;+&#39;&#39;,(_+!&#39;&#39;)[_])+(_+!&#39;&#39;)[_*_]+(_+!&#39;&#39;)[_/_]+(&#39;&#39;+!&#39;&#39;)[_]+(_+!&#39;&#39;)[_]+(_+{}._)[_]+&#39;\&#39;&#39;+[&#39;&#39;+&#39;_=&#34;&#39;,_|_&lt;&lt;_,&#39;&#39;+_%_+_/_,_+_%_,_+_%_,~(~_+_)+&#39;\\&#39;+_*_+_%_,~_+_^-_,_+-~_,(_+-~_)+&#39;!&#34;;&#39;,_&lt;&lt;_-~_,-_*~_+_,(_-~_|_&lt;&lt;_-~_|_)+&#39;{&#39;,~(_*-_+_),_-~_+_|_,_*_+_-~_,-_*~_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;,_/_|_*_+_,~(_*-_+_),_&lt;&lt;_-~_,_/_|_*_+_,(_-~_+_-_)+&#39;($){&#39;,_*_+_^_+_,-_*~_+_,~(~_-_+_),~_*_^~_*_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;][(_+{})[_*_]+(_+{})[_]+(_+_/&#39;&#39;)[_*_]+(_+{}._)[_]](&#39;\\&#39;+_/_)+&#39;\&#39;&#39;)())()</pre>

</div>
<div class="section">
    <h3>Rubyで実行</h3>
    <p>まずはRubyで実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; ruby polyglot.com
Happy, Ruby!</pre>
<p>Ruby1.8，1.9どちらのバージョンでも実行できました。</p>

</div>
<div class="section">
    <h3>Perlで実行</h3>
    <p>次にPerlで実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; perl polyglot.com
Merry Christmas &amp; HAPPY Perl!</pre>
<p>おお。違うメッセージが表示されましたね。</p>

</div>
<div class="section">
    <h3>JavaScriptとして実行</h3>
    <p>これもSpiderMonkeyのjsコマンドで実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt;js -v
JavaScript-C 1.6 2006-11-19
usage: js [-PswWxC] [-b branchlimit] [-c stackchunksize] [-v version] [-f scriptfile] [-e script] [-S maxstacksize] [scriptfile] [scriptarg...]

C:\&gt; js polyglot.com
HAPPY XSS!</pre>
<p>ブラウザのJavaScriptコンソールで実行してもalertが表示されました。面白いですね。</p>

</div>
<div class="section">
    <h3>MS-DOSで実行</h3>
    <p>Windowsのコマンドプロンプトで.comファイル（16bit MS-DOS）を直接実行してみます。</p>

    <pre class="code prettyprint">C:\&gt; polyglot.com
Merry Christmas! 80286 (^-^)/~</pre>
<p>無事、コンソール上にメッセージが表示されました。</p>

</div>
<div class="section">
    <h3>polyglot.com解説</h3>
    <p>動作原理の説明ですが、各プログラミング言語のパーサの解釈の違いによって実行される処理を分岐しています。</p><p>基本的には以下の形となります。</p>

    <pre class="code prettyprint">;&#34;#{&#34;,$/*&#34;;}&#34;;&#39;86&#39;;%#;&#39;Perl&#39;#;&#39;Ruby&#39;#*/=&#39;JS&#39;;</pre>
<p>余分にセミコロン（;）が入っていますが、これは8086としても実行できるようにするためです。</p>

    <pre class="code prettyprint">3B22    ;&#34;     cmp sp,[bp+si]
237B22  #{&#34;    and di,[bp+di+0x22]
2C24    ,$     sub al,0x24
2F      /      das
2A22    *&#34;     sub ah,[bp+si]
3B7D22  ;}&#34;    cmp di,[di+0x22]
3B27    ;&#39;     cmp sp,[bx]
ここに本来実行したい 8086 のコードを書く
27      &#39;      daa</pre>
<p>逆アセンブルするとわかりますね。</p>

</div>
<div class="section">
    <h3>最終問題</h3>
    <p>さて、読者のみなさんに向けて最後に問題です。</p><p>以下のファイルはどの言語で書かれているプログラムでしょうか？</p>

</div>
<div class="section">
    <h3>final.code</h3>
    <p><iframe width="495" height="200" src="/articles/advent-calendar/2010/sym/final.code"></iframe></p><p>ファイル名を<a href="/articles/advent-calendar/2010/sym/final.code">final.code</a>として保存して、いろいろ中身を確認してみてください。</p><p>^L</p>

</div>
<div class="section">
    <h3>正解</h3>
    <p>まず、$><<が最初に出てきていますのでRubyで実行できそうということがわかります。実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code
$&gt;&lt;&lt;&#39;$^_=\&#39;_)@@[`/{#{{}]|~|*:!^?|+{||&#34;`[=&gt;;~`~@|._&#34;]|!`|&lt;&lt;_}!}#%|@~&#34;_~&lt;_=:_,@&lt;}|!`_%=_&#34;+;?]##~{&gt;(!.]&amp;/`#~-&amp;|+^@;`(&amp;~{?/};|}&amp;&amp;;~,~!?$~?_~~}`}}$`?*`&amp;&gt;(#-_!&#34;}&lt;&#34;_!`&#34;!&gt;/~}|&lt;!_.~}!|&#34;`_,&amp;|{-+&#34;+_@-}.]$#!`,#~&gt;]&#34;&#34;|`}|,~!:&#34;~&gt;!{-_&amp;*~?~&lt;)!&lt;~`~^!&lt;|&#34;&amp;&#34;|=%~#,~;}!%!`)#|}.&gt;:_&#34;&lt;^!}^,&#34;!_~~}?+#=]`}_`~^!%`=%-&#34;&#34;&gt;_&#34;`_!}|#%|&#34;|#;)}=]`&lt;_`&lt;|&amp;;~(|!=+}&#34;_&#34;&lt;_:_!~^`}|/%{#/.$,|&#34;&lt;}!`_&#34;~~#,({,&amp;#(?!}&#34;=&gt;|}}&lt;``}[`&lt;[*}&lt;&lt;|~&lt;|+[$]}}|&#34;&lt;^&#34;`&gt;!~}~}~_~&lt;)_&lt;`~`^:``)#@&gt;$|}}$$#}/^}&#34;[&gt;]#,|_-&#34;}_%?{=#&amp;!=&amp;|!/-~|/~()_@:$]=&#34;?}=#!`)$^//=/,$?=#_|||&amp;{{}.[_.`&lt;~~,!&lt;{;)|$&gt;&gt;`{{%}%([]:&lt;_/?#&gt;~!;^=#`#|}#{;.!}^,}})[&amp;,&#34;`{};#{`~}~&#34;)[*);|&gt;@~;*]_#!`|{~|/:&amp;&gt;}|-&lt;&lt;._=_`{|~|&#34;|-^|-^&lt;?}?)&lt;%=%!&#34;&amp;&#34;~`/]`(_~`{)|@?&amp;:;}?%##&#34;&#34;;:&#34;&#34;~??`(&lt;^?[!;&#34;?&#34;&amp;#|}-&gt;;&lt;+}}_&lt;/{&lt;`_&gt;%&#34;&gt;~|!{.{#,`&#34;;&#34;=;+?`&#34;}__`}&gt;`#`&#34;)&lt;`{&amp;&gt;&#34;!&lt;!!~&lt;;`/`]_`$#!`#}.&#34;`=/?%==%^-~}&#34;{={{}=`{&gt;)*^.];([%?@{;|?}~&gt;$}&gt;|#:/_=`&lt;{&lt;}~;^&lt;&lt;[;{||!&gt;`#:}~/_]?&lt;$(?`&gt;}#%|%||;_$-[):`!,~&lt;[__&#34;~}~{?|&lt;!_/}~&gt;&lt;(&lt;&#34;&lt;!]_`$}&amp;{}#/.$:*!:,(,(.={|&gt;!&#34;#&gt;;:-=;#(+~![=@:[|$}|}{}&lt;?])^/,{$.@]]&gt;#&gt;`}#|/`&#34;&gt;^?%&#34;-!&lt;}=&lt;&gt;]_#$}{&#34;$&gt;)&gt;!}})%&lt;&gt;~`_;/|&lt;&gt;{$&#34;`&#34;#}/^/-]%&gt;!`{/=}_?}`}#|$}_`&#34;}^`[&gt;$@@}/&gt;#:-{-@|,&#34;*&amp;?,[$^&#34;|@?=#~&#34;##:|@|,%%#*-$/&#34;*/&#34;(]&#34;.~^}.~)~&lt;#=!#+;!+@&#34;*{;#!||$.@&#34;!=|.$+@[/}({^~#}=!&gt;@%#&#34;?&#34;&gt;~+-|@@#-_#;&#34;:!&#34;?&#34;#-#=!!?!`,#&lt;}#=[%&#34;&lt;{*]|.~,!,`#}&gt;}&lt;:#$#`+|.!&#34;]$;{??*:!|.&#34;`&gt;##`*`+)`@@$.]`-+[#&#34;,#|#%+$*^#(%?+{!&gt;!?=]#!&amp;||:)#*~/}~_!!}&amp;~#&amp;##:&amp;},$&amp;)|&#34;&amp;&#34;&amp;&amp;&#34;[}&lt;~!!~`~~`[,&#34;(&#34;&amp;.[}}!!&#34;&#34;[&#34;&#34;[+$*(+$_&gt;{|`@_%[.`;{&gt;?@#|:#[?&#34;|^[{[,+&lt;;[,^:|/,|{[|%[`&amp;|.[,)##[[;/[%,#~|}|^#@+[/,[{&#34;`&amp;/|#%+]\&#39;,$^_^=\&#39;/[)./@^[[_%&#34;`[#&#34;$).%_[:_&#34;#|]|//{&gt;&gt;!~[?{|`^}&lt;^``}&amp;~@.(#}&#34;~}&#34;`}-(!&gt;&gt;`!^}&lt;}+-$_%`-#|,!&amp;.%~&gt;&amp;[!;|#=+#;%=(?&amp;}!&amp;/&#34;&#34;+]&amp;{(`!#!|/)!/~&#34;&#34;_&lt;!_*;`&gt;?{.%|=~}~_`~}/;}|.&#34;&#34;!^`}}&gt;_!}^~&lt;}&#34;}#&amp;=&amp;};$=#&amp;&lt;#{,~=&lt;.!.|~~^&lt;!^&#34;%~.}#.,$=$[$%`#,$~,_&lt;&#34;|}`^,}}!`~!~!!`&#34;|~~=$.#@&lt;@(!~`|}!|&lt;~}}&#34;&#34;_.&amp;|-|&lt;!}&lt;&#34;|/~?`+=/}.~~&lt;}}!^-~#-#~+$&#34;-|&lt;`}&lt;`^(`!&lt;#|-&amp;!~}~`}*~}&#34;|&lt;!^!~$~?#{&lt;]~`_}&lt;},%!~&lt;%$&lt;]^;`/&amp;}`.[!!`&lt;&lt;!|&lt;`|:&amp;``^&#34;`^;|{`!!^~`{~&lt;~}&#34;=&#34;![~_.$`.[&#34;&lt;{(];;&lt;}^{#&#34;&#34;{{|&#34;=&#34;!~~,~-&gt;_~?~!{+_&amp;`~{|`{!/=?%]=_;;#&lt;(_!]|`#`}~&gt;;;#==@=={-&#34;_?&#34;#&#34;{%$#&lt;`&#34;&lt;=`&#34;&gt;&gt;}`_`;__^`?%&amp;{&#34;{:%|(.|=--,&#34;}{#]}?}!#|%)?}!{&gt;^@;`}&gt;~&lt;^&amp;[}$&gt;##!|;%;;+],;_);|?}~&gt;!%!&#34;=%},&amp;_?@#&lt;$`?&gt;$&#34;#&#34;}&#34;?&gt;!?&gt;--&amp;/;#+]{~|{|!&gt;=|_:`&#34;&lt;^;]}-].[#`{~}}|)(~~&gt;--_:.}-%|[|`|{}##?^`.&amp;!!{.?%._?^{}`#&#34;~%&lt;@}&gt;&lt;~{=/(;-;~!{?&gt;&#34;`=}?|;`&lt;_+,~}|}}[.`_=[&amp;?&gt;{}|&gt;|#&lt;~&lt;}?-~]/~&gt;?_!~_]%$#`&gt;$`;$%&lt;|@:`^-{@[&#34;`##`{#,]_(?`/&lt;`^`![)&#34;``~[%#&#34;|`?}(^!=`|-@;:-_^#|{!{#&#34;)|_?%$([&gt;&gt;&#34;`~|?|!##%`&#34;.|`=!&#34;~#:.=._&amp;?&gt;{#{%&#34;}=&gt;;(:&gt;(&lt;:&gt;:#]%#`|||`)+=/$_:%&#34;}~/&gt;%;&#34;{#!#$#./#;&gt;;&gt;&amp;;&lt;=`=`|`=#|&#34;=&lt;~~}-{}?}`=,.!!?}{#&amp;|{`;@}!=;~@,&#34;&lt;{[=!-^%{|=||#=&gt;&gt;?~~,}&lt;_&#34;/&amp;?_#?#~&#34;{#`_~!|[|/{||&#34;=@|+?$&#34;&gt;#&lt;};+`&gt;%{&#34;}@|`/]!^|-*[;[=[(|%?{?}$&gt;}:#}&gt;!&#34;&#34;?!&amp;!,|/_|:)~$&gt;}:$*.~@@{&lt;&gt;}/-[#{%=|&gt;&#34;&lt;$&#34;!,&#34;-~/&gt;(|--}.!%&lt;#|||?!|*}.~^`-|=|,,~-_?&lt;|.&#34;--|(~`_$&amp;[?!#~&lt;?}&#34;.&#34;-(|+]?;#?_/#{)$/`$+_#!}&gt;@|,?:?:$?||{&lt;#?#;|.}&#34;^[~~&amp;{:%^&amp;~`$$|.,`-&amp;^/}#!*$|:!;!&#34;}}}_(%|)|~*+&#34;&lt;_[:#,}}{{/|!`&#34;}}&#34;&lt;&#34;&#34;&lt;|&lt;}&lt;}(&gt;|!!}}~~|~~|%)$&amp;&amp;*}/_&#34;?}!(|#_@_``}][).|`|^||%|&lt;:@/|?|(^&lt;![_~[{|[][=|!;&lt;}`|(&#34;|~&#34;~&gt;[#[`||:|!?|_|?[![-+%%\&#39;,$^_=~(\&#39;(?{$^_=~\&#39;.(\&#39;_^&#34;&#34;\&#39;^\&#39;+,|/\&#39;.&#34;-&#34;.(\&#39;$%\&#39;^\&#39;;{\&#39;.\&#39;(-:^;\&#39;.(\&#39;[)]@\&#39;^\&#39;&gt;_&lt;,\&#39;).\&#39;$^_})\&#39;)))&#39;</pre>
<p>むむ。もう一回Rubyで実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby
$^_=&#39;_)@@[`/{#{{}]|~|*:!^?|+{||&#34;`[=&gt;;~`~@|._&#34;]|!`|&lt;&lt;_}!}#%|@~&#34;_~&lt;_=:_,@&lt;}|!`_%=_&#34;+;?]##~{&gt;(!.]&amp;/`#~-&amp;|+^@;`(&amp;~{?/};|}&amp;&amp;;~,~!?$~?_~~}`}}$`?*`&amp;&gt;(#-_!&#34;}&lt;&#34;_!`&#34;!&gt;/~}|&lt;!_.~}!|&#34;`_,&amp;|{-+&#34;+_@-}.]$#!`,#~&gt;]&#34;&#34;|`}|,~!:&#34;~&gt;!{-_&amp;*~?~&lt;)!&lt;~`~^!&lt;|&#34;&amp;&#34;|=%~#,~;}!%!`)#|}.&gt;:_&#34;&lt;^!}^,&#34;!_~~}?+#=]`}_`~^!%`=%-&#34;&#34;&gt;_&#34;`_!}|#%|&#34;|#;)}=]`&lt;_`&lt;|&amp;;~(|!=+}&#34;_&#34;&lt;_:_!~^`}|/%{#/.$,|&#34;&lt;}!`_&#34;~~#,({,&amp;#(?!}&#34;=&gt;|}}&lt;``}[`&lt;[*}&lt;&lt;|~&lt;|+[$]}}|&#34;&lt;^&#34;`&gt;!~}~}~_~&lt;)_&lt;`~`^:``)#@&gt;$|}}$$#}/^}&#34;[&gt;]#,|_-&#34;}_%?{=#&amp;!=&amp;|!/-~|/~()_@:$]=&#34;?}=#!`)$^//=/,$?=#_|||&amp;{{}.[_.`&lt;~~,!&lt;{;)|$&gt;&gt;`{{%}%([]:&lt;_/?#&gt;~!;^=#`#|}#{;.!}^,}})[&amp;,&#34;`{};#{`~}~&#34;)[*);|&gt;@~;*]_#!`|{~|/:&amp;&gt;}|-&lt;&lt;._=_`{|~|&#34;|-^|-^&lt;?}?)&lt;%=%!&#34;&amp;&#34;~`/]`(_~`{)|@?&amp;:;}?%##&#34;&#34;;:&#34;&#34;~??`(&lt;^?[!;&#34;?&#34;&amp;#|}-&gt;;&lt;+}}_&lt;/{&lt;`_&gt;%&#34;&gt;~|!{.{#,`&#34;;&#34;=;+?`&#34;}__`}&gt;`#`&#34;)&lt;`{&amp;&gt;&#34;!&lt;!!~&lt;;`/`]_`$#!`#}.&#34;`=/?%==%^-~}&#34;{={{}=`{&gt;)*^.];([%?@{;|?}~&gt;$}&gt;|#:/_=`&lt;{&lt;}~;^&lt;&lt;[;{||!&gt;`#:}~/_]?&lt;$(?`&gt;}#%|%||;_$-[):`!,~&lt;[__&#34;~}~{?|&lt;!_/}~&gt;&lt;(&lt;&#34;&lt;!]_`$}&amp;{}#/.$:*!:,(,(.={|&gt;!&#34;#&gt;;:-=;#(+~![=@:[|$}|}{}&lt;?])^/,{$.@]]&gt;#&gt;`}#|/`&#34;&gt;^?%&#34;-!&lt;}=&lt;&gt;]_#$}{&#34;$&gt;)&gt;!}})%&lt;&gt;~`_;/|&lt;&gt;{$&#34;`&#34;#}/^/-]%&gt;!`{/=}_?}`}#|$}_`&#34;}^`[&gt;$@@}/&gt;#:-{-@|,&#34;*&amp;?,[$^&#34;|@?=#~&#34;##:|@|,%%#*-$/&#34;*/&#34;(]&#34;.~^}.~)~&lt;#=!#+;!+@&#34;*{;#!||$.@&#34;!=|.$+@[/}({^~#}=!&gt;@%#&#34;?&#34;&gt;~+-|@@#-_#;&#34;:!&#34;?&#34;#-#=!!?!`,#&lt;}#=[%&#34;&lt;{*]|.~,!,`#}&gt;}&lt;:#$#`+|.!&#34;]$;{??*:!|.&#34;`&gt;##`*`+)`@@$.]`-+[#&#34;,#|#%+$*^#(%?+{!&gt;!?=]#!&amp;||:)#*~/}~_!!}&amp;~#&amp;##:&amp;},$&amp;)|&#34;&amp;&#34;&amp;&amp;&#34;[}&lt;~!!~`~~`[,&#34;(&#34;&amp;.[}}!!&#34;&#34;[&#34;&#34;[+$*(+$_&gt;{|`@_%[.`;{&gt;?@#|:#[?&#34;|^[{[,+&lt;;[,^:|/,|{[|%[`&amp;|.[,)##[[;/[%,#~|}|^#@+[/,[{&#34;`&amp;/|#%+]&#39;,$^_^=&#39;/[)./@^[[_%&#34;`[#&#34;$).%_[:_&#34;#|]|//{&gt;&gt;!~[?{|`^}&lt;^``}&amp;~@.(#}&#34;~}&#34;`}-(!&gt;&gt;`!^}&lt;}+-$_%`-#|,!&amp;.%~&gt;&amp;[!;|#=+#;%=(?&amp;}!&amp;/&#34;&#34;+]&amp;{(`!#!|/)!/~&#34;&#34;_&lt;!_*;`&gt;?{.%|=~}~_`~}/;}|.&#34;&#34;!^`}}&gt;_!}^~&lt;}&#34;}#&amp;=&amp;};$=#&amp;&lt;#{,~=&lt;.!.|~~^&lt;!^&#34;%~.}#.,$=$[$%`#,$~,_&lt;&#34;|}`^,}}!`~!~!!`&#34;|~~=$.#@&lt;@(!~`|}!|&lt;~}}&#34;&#34;_.&amp;|-|&lt;!}&lt;&#34;|/~?`+=/}.~~&lt;}}!^-~#-#~+$&#34;-|&lt;`}&lt;`^(`!&lt;#|-&amp;!~}~`}*~}&#34;|&lt;!^!~$~?#{&lt;]~`_}&lt;},%!~&lt;%$&lt;]^;`/&amp;}`.[!!`&lt;&lt;!|&lt;`|:&amp;``^&#34;`^;|{`!!^~`{~&lt;~}&#34;=&#34;![~_.$`.[&#34;&lt;{(];;&lt;}^{#&#34;&#34;{{|&#34;=&#34;!~~,~-&gt;_~?~!{+_&amp;`~{|`{!/=?%]=_;;#&lt;(_!]|`#`}~&gt;;;#==@=={-&#34;_?&#34;#&#34;{%$#&lt;`&#34;&lt;=`&#34;&gt;&gt;}`_`;__^`?%&amp;{&#34;{:%|(.|=--,&#34;}{#]}?}!#|%)?}!{&gt;^@;`}&gt;~&lt;^&amp;[}$&gt;##!|;%;;+],;_);|?}~&gt;!%!&#34;=%},&amp;_?@#&lt;$`?&gt;$&#34;#&#34;}&#34;?&gt;!?&gt;--&amp;/;#+]{~|{|!&gt;=|_:`&#34;&lt;^;]}-].[#`{~}}|)(~~&gt;--_:.}-%|[|`|{}##?^`.&amp;!!{.?%._?^{}`#&#34;~%&lt;@}&gt;&lt;~{=/(;-;~!{?&gt;&#34;`=}?|;`&lt;_+,~}|}}[.`_=[&amp;?&gt;{}|&gt;|#&lt;~&lt;}?-~]/~&gt;?_!~_]%$#`&gt;$`;$%&lt;|@:`^-{@[&#34;`##`{#,]_(?`/&lt;`^`![)&#34;``~[%#&#34;|`?}(^!=`|-@;:-_^#|{!{#&#34;)|_?%$([&gt;&gt;&#34;`~|?|!##%`&#34;.|`=!&#34;~#:.=._&amp;?&gt;{#{%&#34;}=&gt;;(:&gt;(&lt;:&gt;:#]%#`|||`)+=/$_:%&#34;}~/&gt;%;&#34;{#!#$#./#;&gt;;&gt;&amp;;&lt;=`=`|`=#|&#34;=&lt;~~}-{}?}`=,.!!?}{#&amp;|{`;@}!=;~@,&#34;&lt;{[=!-^%{|=||#=&gt;&gt;?~~,}&lt;_&#34;/&amp;?_#?#~&#34;{#`_~!|[|/{||&#34;=@|+?$&#34;&gt;#&lt;};+`&gt;%{&#34;}@|`/]!^|-*[;[=[(|%?{?}$&gt;}:#}&gt;!&#34;&#34;?!&amp;!,|/_|:)~$&gt;}:$*.~@@{&lt;&gt;}/-[#{%=|&gt;&#34;&lt;$&#34;!,&#34;-~/&gt;(|--}.!%&lt;#|||?!|*}.~^`-|=|,,~-_?&lt;|.&#34;--|(~`_$&amp;[?!#~&lt;?}&#34;.&#34;-(|+]?;#?_/#{)$/`$+_#!}&gt;@|,?:?:$?||{&lt;#?#;|.}&#34;^[~~&amp;{:%^&amp;~`$$|.,`-&amp;^/}#!*$|:!;!&#34;}}}_(%|)|~*+&#34;&lt;_[:#,}}{{/|!`&#34;}}&#34;&lt;&#34;&#34;&lt;|&lt;}&lt;}(&gt;|!!}}~~|~~|%)$&amp;&amp;*}/_&#34;?}!(|#_@_``}][).|`|^||%|&lt;:@/|?|(^&lt;![_~[{|[][=|!;&lt;}`|(&#34;|~&#34;~&gt;[#[`||:|!?|_|?[![-+%%&#39;,$^_=~(&#39;(?{$^_=~&#39;.(&#39;_^&#34;&#34;&#39;^&#39;+,|/&#39;.&#34;-&#34;.(&#39;$%&#39;^&#39;;{&#39;.&#39;(-:^;&#39;.(&#39;[)]@&#39;^&#39;&gt;_&lt;,&#39;).&#39;$^_})&#39;)))</pre>
<p>なんかPerlっぽいプログラムが出力されましたので、Perlで実行してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby | perl
$^_=&#39;]^).*{`&#39;,$^_^=&#39;-,@@^_&gt;&#39;,$^=&#34;\&#34;\&#34;[_=((_=\&#34;\&#34;+-~-~\&#34;\&#34;)+{})[-~_*_]+(_+{})[_]+(_+{}._)[_]+(_+![])[_*_]+(_+!\&#34;\&#34;)[_/_]+(_+!\&#34;\&#34;)[_]+(\&#34;\&#34;+!\&#34;\&#34;)[_]+(_+{})[-~_*_]+(_+!\&#34;\&#34;)[_/_]+(_+{})[_]+(_+!\&#34;\&#34;)[_]][_](_[_][_]((_=-~-~\&#34;\&#34;+\&#34;\&#34;,(_+!\&#34;\&#34;)[_])+(_+!\&#34;\&#34;)[_*_]+(_+!\&#34;\&#34;)[_/_]+(\&#34;\&#34;+!\&#34;\&#34;)[_]+(_+!\&#34;\&#34;)[_]+(_+{}._)[_]+&#39;\\\&#39;\&#39;+[\&#34;\&#34;+&#39;_=\&#34;\%\@\@\%!!-(?-;\%-=[-:=`________-|\%-#)-#!-\$)`]]]]]]]])--[!-!.-||-{|`^_^]^_^-:}--}-,_-:|`^_^]^_^-;}-]\@-\$[-#{`^_^]^_^-~!--#--)-\@}`^_^]^_^-,\%-#=-;[-\%[`^_^]^_^-~,-+!-{!-,!`^_^]^_^-:[-[#-|:-{]`^_^]^_^-`]-`,-[+-:)`^_^]^_^-!?-?\%-!=-{/`^_^]^_^--\@--?--#-~]`^_^]^_^-`[-(\$-+^-?``^_^]^_^-;^-\@:-.+-[\$`^_^]^_^-\$(-\@\%-[?-;{`^_^]^_^-\@+-[`-[`-!\$`^_^]^_^-){-!{-;{-;;`^_^]^_^-!|-+?-\%\%-|\%`^_^]^_^-#_-?!-|:--?`^_^]^_^-#{-~(-;:-\%#`^_^]^_^-]?-\@:--:-~{`^_^]^_^-+:-+:-+---(`^_^]^_^-,+-:|-)\%-~:`^_^]^_^-+~-`/-]:-}=`^_^]^_^-\@#-^_-\@,-:|`^_^]^_^-~\@-[|-\$`-],`^_^]^_^-`,-#[-\$(-[``^_^]^_^??\&#34;;&#39;,_&lt;&lt;_-~_,-_*~_+_,(_-~_|_&lt;&lt;_-~_|_)+&#39;{&#39;,~(_*-_+_),_-~_+_|_,_*_+_-~_,-_*~_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;,_/_|_*_+_,~(_*-_+_),_&lt;&lt;_-~_,_/_|_*_+_,(_-~_+_-_)+&#39;(\$){&#39;,_*_+_^_+_,-_*~_+_,~(~_-_+_),~_*_^~_*_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;][(_+{})[_*_]+(_+{})[_]+(_+_/\&#34;\&#34;)[_*_]+(_+{}._)[_]](&#39;\\\\\&#39;+_/_)+&#39;\\\&#39;\&#39;)())()&#34;,$^_=~(&#39;(?{$^_=~&#39;.(&#39;_^&#34;&#34;&#39;^&#39;+,|/&#39;.&#34;-&#34;.(&#39;$%&#39;^&#39;;{&#39;.&#39;(-:^;&#39;.(&#39;[)]@&#39;^&#39;&gt;_&lt;,&#39;).&#39;$^_})&#39;)))</pre>
<p>どうやら、もう一度Perlで実行する必要があるみたいです。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby | perl | perl
&#34;&#34;[_=((_=&#34;&#34;+-~-~&#34;&#34;)+{})[-~_*_]+(_+{})[_]+(_+{}._)[_]+(_+![])[_*_]+(_+!&#34;&#34;)[_/_]+(_+!&#34;&#34;)[_]+(&#34;&#34;+!&#34;&#34;)[_]+(_+{})[-~_*_]+(_+!&#34;&#34;)[_/_]+(_+{})[_]+(_+!&#34;&#34;)[_]][_](_[_][_]((_=-~-~&#34;&#34;+&#34;&#34;,(_+!&#34;&#34;)[_])+(_+!&#34;&#34;)[_*_]+(_+!&#34;&#34;)[_/_]+(&#34;&#34;+!&#34;&#34;)[_]+(_+!&#34;&#34;)[_]+(_+{}._)[_]+&#39;\&#39;&#39;+[&#34;&#34;+&#39;_=&#34;%@@%!!-(?-;%-=[-:=`________-|%-#)-#!-$)`]]]]]]]])--[!-!.-||-{|`^_^]^_^-:}--}-,_-:|`^_^]^_^-;}-]@-$[-#{`^_^]^_^-~!--#--)-@}`^_^]^_^-,%-#=-;[-%[`^_^]^_^-~,-+!-{!-,!`^_^]^_^-:[-[#-|:-{]`^_^]^_^-`]-`,-[+-:)`^_^]^_^-!?-?%-!=-{/`^_^]^_^--@--?--#-~]`^_^]^_^-`[-($-+^-?``^_^]^_^-;^-@:-.+-[$`^_^]^_^-$(-@%-[?-;{`^_^]^_^-@+-[`-[`-!$`^_^]^_^-){-!{-;{-;;`^_^]^_^-!|-+?-%%-|%`^_^]^_^-#_-?!-|:--?`^_^]^_^-#{-~(-;:-%#`^_^]^_^-]?-@:--:-~{`^_^]^_^-+:-+:-+---(`^_^]^_^-,+-:|-)%-~:`^_^]^_^-+~-`/-]:-}=`^_^]^_^-@#-^_-@,-:|`^_^]^_^-~@-[|-$`-],`^_^]^_^-`,-#[-$(-[``^_^]^_^??&#34;;&#39;,_&lt;&lt;_-~_,-_*~_+_,(_-~_|_&lt;&lt;_-~_|_)+&#39;{&#39;,~(_*-_+_),_-~_+_|_,_*_+_-~_,-_*~_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;,_/_|_*_+_,~(_*-_+_),_&lt;&lt;_-~_,_/_|_*_+_,(_-~_+_-_)+&#39;($){&#39;,_*_+_^_+_,-_*~_+_,~(~_-_+_),~_*_^~_*_+_,(_&lt;&lt;_-~_)+&#39;(_)}&#39;][(_+{})[_*_]+(_+{})[_]+(_+_/&#34;&#34;)[_*_]+(_+{}._)[_]](&#39;\\&#39;+_/_)+&#39;\&#39;&#39;)())()</pre>
<p>やっと、見慣れたJavaScriptのファイルが出力されました。jsコマンドで実行してみます。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby | perl | perl | js
%@@%!!-(?-;%-=[-:=`________-|%-#)-#!-$)`]]]]]]]])--[!-!.-||-{|`^_^]^_^-:}--}-,_-:|`^_^]^_^-;}-]@-$[-#{`^_^]^_^-~!--#--)-@}`^_^]^_^-,%-#=-;[-%[`^_^]^_^-~,-+!-{!-,!`^_^]^_^-:[-[#-|:-{]`^_^]^_^-`]-`,-[+-:)`^_^]^_^-!?-?%-!=-{/`^_^]^_^--@--?--#-~]`^_^]^_^-`[-($-+^-?``^_^]^_^-;^-@:-.+-[$`^_^]^_^-$(-@%-[?-;{`^_^]^_^-@+-[`-[`-!$`^_^]^_^-){-!{-;{-;;`^_^]^_^-!|-+?-%%-|%`^_^]^_^-#_-?!-|:--?`^_^]^_^-#{-~(-;:-%#`^_^]^_^-]?-@:--:-~{`^_^]^_^-+:-+:-+---(`^_^]^_^-,+-:|-)%-~:`^_^]^_^-+~-`/-]:-}=`^_^]^_^-@#-^_-@,-:|`^_^]^_^-~@-[|-$`-],`^_^]^_^-`,-#[-$(-[``^_^]^_^??</pre>
<p>怪しいファイルが出力されましたが、final.comというファイル名で保存してディスアセンブルして中身を確認してみましょう。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby | perl | perl | js &gt; final.com
C:\&gt; ndisasm final.com | more
00000000  254040            and ax,0x4040
00000003  252121            and ax,0x2121
00000006  2D283F            sub ax,0x3f28
00000009  2D3B25            sub ax,0x253b
0000000C  2D3D5B            sub ax,0x5b3d
0000000F  2D3A3D            sub ax,0x3d3a
00000012  60                pushaw
00000013  5F                pop di
00000014  5F                pop di
00000015  5F                pop di
00000016  5F                pop di
00000017  5F                pop di
00000018  5F                pop di
00000019  5F                pop di
0000001A  5F                pop di
0000001B  2D7C25            sub ax,0x257c
0000001E  2D2329            sub ax,0x2923
00000021  2D2321            sub ax,0x2123
00000024  2D2429            sub ax,0x2924
00000027  60                pushaw
00000028  5D                pop bp
00000029  5D                pop bp
 :
 :</pre>
<p>お。これはMS-DOSエミュレータ上で実行できそうですね。</p>

    <pre class="code prettyprint">C:\&gt; ruby final.code | ruby | perl | perl | js &gt; final.com
C:\&gt; final.com
Merry Christmas! 80286 (^-^)/~
</pre>
<p>実行できました！</p><p>ぜひみなさんも記号プログラミングをマスターしてHappy Hackingしましょう！</p><p>メリークリスマス！</p>

</div>
        </div>
        </main>
        <footer class="site-footer">
    <nav>
        <a href="https://github.com/perl-users-jp/perl-users-jp.github.io" target="_blank" rel="noopener">
            <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        </a>
    </nav>
    <p>
        <a href="/">Perl-users.jp</a> - 日本のPerlユーザーのためのハブサイトです。日本の Perl ユーザーに最新の情報を届けることを目的にしています。
    </p>
    <p>
    文章のライセンスは、特に明記が無い限りすべて <a href="http://creativecommons.org/licenses/by/2.0/">CC-by</a>でおねがいします。
    </p>
</footer>

        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
