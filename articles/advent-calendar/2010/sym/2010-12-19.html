<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="takesako">
        <title>1分でわかる記号だけのErlangプログラミング - Articles Advent Calendar 2010 Sym</title>
        <link rel="icon" href="/img/favicon.ico">
        <link href="TODO" rel="stylesheet">
    </head>
    <body>
        <h1>1分でわかる記号だけのErlangプログラミング</h1>

        <p>4回連続でそろそろネタ切れな<a href="http://developer.cybozu.co.jp/takesako/">id:TAKESAKO</a>です。</p><p>みなさんが普段の業務でよく使っていると思われるErlangシェルで記号プログラミングをしてみましょう。</p>

<div class="section">
    <h3>Erlangとは</h3>
    <p>Erlang（アーラン）は分散環境での並列処理をサポートした実用的な関数型言語です。</p>

<ul>
<li>1986年に誕生、1998年にオープンソースとして公開</li>
<li>変数名の先頭は英大文字かアンダースコアで始まる</li>
<li>変数への代入は１回しか行えない（再代入不可）</li>
<li>式の終わりは.（ピリオド）で表す</li>
<li>「変数=値.」で変数宣言と代入が行われる</li>
</ul><p>などといった特徴があります。</p><p>.（ピリオド）が必ず文末に出てくるなど、COBOL時代を彷彿させる言語仕様の古臭さは否めません。</p><p>数学者のアグナー・アーラン (Agner Erlang) から名前をとった説、エリクソン社内で開発された言語（ERicsson LANGuage）なのでErlangと呼ぶ説があります。</p>

</div>
<div class="section">
    <h3>Erlangのインストール</h3>
    <p>Ubuntuではapt-getで簡単にインストールできます。</p>

    <pre class="code">$ sudo apt-get install erlang</pre>
<p>Windows環境では<a href="http://www.erlang.org/download.html">http://www.erlang.org/download.html</a>のバイナリをダウンロードできます。</p>

</div>
<div class="section">
    <h3>erlコマンド</h3>
    <p>Erlangシェルを起動するにはerlコマンドを実行します。<br />
（Pが抜けたPerlコマンド＝erlコマンドと覚えておけばよいでしょう）</p>

    <pre class="code">$ erl
Erlang (BEAM) emulator version 5.6.5 

Eshell V5.6.5  (abort with ^G)
1&gt;
BREAK: (a)bort (c)ontinue (p)roc info (i)nfo (l)oaded
       (v)ersion (k)ill (D)b-tables (d)istribution
a</pre>
<p>Erlangシェルを終了するには、Ctrl+Cを入力し、a（abort）を押して改行を入力します。</p>

</div>
<div class="section">
    <h3>Erlangシェルでこんにちは！</h3>
    <p>Erlangシェルを起動して、[1].を入力すると[1]が返りますが、[11]を入力すると文字列"\v"が返ります。</p>

    <pre class="code">$ erl
Erlang (BEAM) emulator version 5.6.5

Eshell V5.6.5  (abort with ^G)
1&gt; [1].
[1]
2&gt; [11].
&#34;\v&#34;</pre>
<p>怪しいですね。これは一体どういう仕様なのでしょうか？</p><p>なぜだかわかりませんが、リストの要素に表示可能文字に該当するASCIIコードの数値が指定されている場合、Erlangシェル上では文字列として表示されるようです。</p>

    <pre class="code">3&gt; [111].
&#34;o&#34;
4&gt; [111,112,113].
&#34;opq&#34;</pre>
<p>カンマ区切りでリスト指定すると複数文字も連結して表示できます。</p>

</div>
<div class="section">
    <h3>記号だけで任意の数値を作る方法</h3>
    <p>実はErlangで「$a」と書くと'a'のASCIIコード97の数値が返ります。$の右側には印字可能な文字であれば何でも書けて、「$b」は98、「$c」は99の数値を意味します。<br />
ということは、$の右側に記号も書くことができて「$!」と書くと'!'のASCIIコード33が返るのです。これらのASCIIコードは普通に数値として解釈されるため「$!+$!」のように足し算を行うことができ66の数値が生成できます。<br />
これを応用して足し算や引き算を組み合わせると、すべての数値を記号だけで表現することができます。</p>

    <pre class="code">NUL: ($!-$!) == 0
SOH: ($&#34;-$!) == 1
STX: ($#-$!) == 2
ETX: ($$-$!) == 3
EOT: ($%-$!) == 4
ENQ: ($&amp;-$!) == 5
ACK: ($&#39;-$!) == 6
\a : ($(-$!) == 7
\b : ($)-$!) == 8
\t : ($*-$!) == 9
\n : ($+-$!) == 10
\v : ($,-$!) == 11
\f : ($--$!) == 12
\r : ($.-$!) == 13
SO: ($/-$!) == 14
SI : ($:-$+) == 15
DLE: ($:-$*) == 16
DC1: ($:-$)) == 17
DC2: ($:-$() == 18
DC3: ($:-$&#39;) == 19
DC4: ($:-$&amp;) == 20
NAK: ($:-$%) == 21
SYN: ($:-$$) == 22
ETB: ($:-$#) == 23
CAN: ($:-$&#34;) == 24
EM : ($:-$!) == 25
SUB: ($;-$!) == 26
ESC: ($&lt;-$!) == 27
FS : ($=-$!) == 28
GS : ($&gt;-$!) == 29
RS : ($?-$!) == 30
US : ($@-$!) == 31
   : ($[-$;) == 32
 ! : ($!) == 33
 &#34; : ($&#34;) == 34
 # : ($#) == 35
 $ : ($$) == 36
 % : ($%) == 37
 &amp; : ($&amp;) == 38
 &#39; : ($&#39;) == 39
 ( : ($() == 40
 ) : ($)) == 41
 * : ($*) == 42
 + : ($+) == 43
 , : ($,) == 44
 - : ($-) == 45
 . : ($.) == 46
 / : ($/) == 47
 0 : ($[-$+) == 48
 1 : ($[-$*) == 49
 2 : ($[-$)) == 50
 3 : ($[-$() == 51
 4 : ($[-$&#39;) == 52
 5 : ($[-$&amp;) == 53
 6 : ($[-$%) == 54
 7 : ($[-$$) == 55
 8 : ($[-$#) == 56
 9 : ($[-$&#34;) == 57
 : : ($:) == 58
 ; : ($;) == 59
 &lt; : ($&lt;) == 60
 = : ($=) == 61
 &gt; : ($&gt;) == 62
 ? : ($?) == 63
 @ : ($@) == 64
 A : (${-$:) == 65
 B : ($!+$!) == 66
 C : ($!+$&#34;) == 67
 D : ($!+$#) == 68
 E : ($!+$$) == 69
 F : ($!+$%) == 70
 G : ($!+$&amp;) == 71
 H : ($!+$&#39;) == 72
 I : ($!+$() == 73
 J : ($!+$)) == 74
 K : ($!+$*) == 75
 L : ($!+$+) == 76
 M : ($!+$,) == 77
 N : ($!+$-) == 78
 O : ($!+$.) == 79
 P : ($!+$/) == 80
 Q : ($&#34;+$/) == 81
 R : ($#+$/) == 82
 S : ($$+$/) == 83
 T : ($%+$/) == 84
 U : ($&amp;+$/) == 85
 V : ($&#39;+$/) == 86
 W : ($(+$/) == 87
 X : ($)+$/) == 88
 Y : ($*+$/) == 89
 Z : ($++$/) == 90
 [ : ($[) == 91
 \ : ($\) == 92
 ] : ($]) == 93
 ^ : ($^) == 94
 _ : ($_) == 95
 ` : ($`) == 96
 a : ($!+$@) == 97
 b : ($&#34;+$@) == 98
 c : ($#+$@) == 99
 d : ($$+$@) == 100
 e : ($%+$@) == 101
 f : ($&amp;+$@) == 102
 g : ($&#39;+$@) == 103
 h : ($(+$@) == 104
 i : ($)+$@) == 105
 j : ($*+$@) == 106
 k : ($++$@) == 107
 l : ($,+$@) == 108
 m : ($-+$@) == 109
 n : ($.+$@) == 110
 o : ($/+$@) == 111
 p : ($!+$!+$.) == 112
 q : ($!+$!+$/) == 113
 r : ($!+$&#34;+$/) == 114
 s : ($!+$#+$/) == 115
 t : ($:+$:) == 116
 u : ($:+$;) == 117
 v : ($:+$&lt;) == 118
 w : ($:+$=) == 119
 x : ($:+$&gt;) == 120
 y : ($:+$?) == 121
 z : ($:+$@) == 122
 { : (${) == 123
 | : ($|) == 124
 } : ($}) == 125
 ~ : ($~) == 126
DEL: ($!+$^) == 127</pre>
<p>Ruby1.8で記号プログラミングするときとやり方は一緒ですね。</p>

</div>
<div class="section">
    <h3>記号だけで「Hello, world!\n」</h3>
    <p>あとは「Hello, world!\n」の文字列をASCIIコードの数値リストに変換してあげます。</p>

    <pre class="code">5&gt; [72,101,108,108,111,44,32,119,111,114,108,100,33,10].
&#34;Hello, world!\n&#34;</pre>
<p>これを記号だけで書き直すと以下になります。</p>

    <pre class="code">6&gt; [$!+$&#39;,$%+$@,$,+$@,$,+$@,$/+$@,$,,$[-$;,$:+$=,$/+$@,$!+$&#34;+$/,$,+$@,$$+$@,$!,$+-$!].
&#34;Hello, world!\n&#34;</pre>
<p>ね、簡単でしょ？</p>

</div>
<div class="section">
    <h3>参考文献</h3>
    
<ul>
<li><a href="http://d.hatena.ne.jp/ucq/20100709/1278682579">記号だけでErlangプログラミング - 勇士Ｑの日記</a></li>
<li><a href="http://perl-users.jp/articles/advent-calendar/2010/sym/4">Ruby1.8で学ぶ、簡単?!記号プログラミング - JPerl advent calendar 2010 sym Track</a></li>
</ul>
</div>
        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
