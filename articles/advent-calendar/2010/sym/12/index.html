<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>7種類の記号だけでPerlプログラムを書く - Articles Advent Calendar 2010 Sym</title>
        <meta name="title" content="7種類の記号だけでPerlプログラムを書く - Articles Advent Calendar 2010 Sym">
        <meta name="description" content="">
        <meta name="author" content="sugyan <sugi1982@gmail.com>">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/12">
        <meta property="og:title" content="7種類の記号だけでPerlプログラムを書く - Articles Advent Calendar 2010 Sym">
        <meta property="og:description" content="">
        <meta property="og:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:7%E7%A8%AE%E9%A1%9E%E3%81%AE%E8%A8%98%E5%8F%B7%E3%81%A0%E3%81%91%E3%81%A7Perl%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E6%9B%B8%E3%81%8F,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:sugyan%20%3Csugi1982%40gmail.com%3E,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://perl-users.jp/articles/advent-calendar/2010/sym/12">
        <meta property="twitter:title" content="7種類の記号だけでPerlプログラムを書く - Articles Advent Calendar 2010 Sym">
        <meta property="twitter:description" content="">
        <meta property="twitter:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:7%E7%A8%AE%E9%A1%9E%E3%81%AE%E8%A8%98%E5%8F%B7%E3%81%A0%E3%81%91%E3%81%A7Perl%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E6%9B%B8%E3%81%8F,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:sugyan%20%3Csugi1982%40gmail.com%3E,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <link rel="icon" href="/img/favicon.ico">
        <link rel="canonical" href="https://perl-users.jp/articles/advent-calendar/2010/sym/12">
        <link href="TODO" rel="stylesheet">
    </head>
    <body>
        <h1>7種類の記号だけでPerlプログラムを書く</h1>
        tag
            <a href='/tag/sym'>sym</a>
            <a href='/tag/perl'>perl</a>

        <p>こんにちは、<a href="http://twitter.com/sugyan">@sugyan</a>です。<a href="http://b.hatena.ne.jp/entry/perl-users.jp/articles/advent-calendar/2010/sym/5">&#x524D;&#x56DE;</a>に引き続きPerlネタで投稿します。</p>

<div class="section">
    <h3>■前回のおさらい</h3>
    <p>前回は、"Hello world!"を出力するPerl記号プログラムとして以下のものを作成しました。</p>

    <pre class="code prettyprint lang-perl">&#39;&#39; =~ (&#39;(?{&#39;.(
(&#39;[&#39;^&#39;.&#39;).(&#39;[&#39;^&#39;(&#39;).(&#39;`&#39;|&#39;%&#39;).&#39; &#39;.(&#39;[&#39;^&#39;(&#39;).(&#39;[&#39;^&#39;/&#39;).(&#39;[&#39;^&#39;)&#39;).(&#39;`&#39;|&#39;)&#39;).(&#39;`&#39;|&#39;#&#39;).(&#39;[&#39;^&#39;/&#39;).&#39;;&#39;.
(&#39;[&#39;^&#39;.&#39;).(&#39;[&#39;^&#39;(&#39;).(&#39;`&#39;|&#39;%&#39;).&#39; &#39;.(&#39;[&#39;^&#39;,&#39;).(&#39;`&#39;|&#39;!&#39;).(&#39;[&#39;^&#39;)&#39;).(&#39;`&#39;|&#39;.&#39;).(&#39;`&#39;|&#39;)&#39;).(&#39;`&#39;|&#39;.&#39;).(&#39;`&#39;|&#34;&#39;&#34;).(&#39;[&#39;^&#39;(&#39;).&#39;;&#39;.
(&#39;[&#39;^&#39;+&#39;).(&#39;[&#39;^&#39;)&#39;).(&#39;`&#39;|&#39;)&#39;).(&#39;`&#39;|&#39;.&#39;).(&#39;[&#39;^&#39;/&#39;).
(&#39; +&#34;&#39;.(&#39;`&#39;^&#39;(&#39;).(&#39;`&#39;|&#39;%&#39;).(&#39;`&#39;|&#39;,&#39;).(&#39;`&#39;|&#39;,&#39;).(&#39;`&#39;|&#39;/&#39;).&#39; &#39;.(&#39;[&#39;^&#39;,&#39;).(&#39;`&#39;|&#39;/&#39;).(&#39;[&#39;^&#39;)&#39;).(&#39;`&#39;|&#39;,&#39;).(&#39;`&#39;|&#39;$&#39;).&#39;!&#34;&#39;))
.&#39;})&#39;);</pre>
<p>確かに記号だけで書かれていて嬉しいのですが、22種類もの記号が使われています。今回は、これをもっと少ない種類の記号だけで表現することを考えてみます。</p>

</div>
<div class="section">
    <h3>■記号だけのPerlプログラムを作る条件</h3>
    <p>前回述べた通り、記号だけでPerlプログラムを作るためには</p>

    <pre class="code prettyprint lang-perl">&#39;&#39;=~/(?{ print &#34;hoge&#34; })/</pre>
<p>という拡張正規表現を利用します。これは、</p>

    <pre class="code prettyprint lang-perl">&#39;&#39;=~&#39;(?{ print &#34;hoge&#34; })&#39;</pre>
<p>と書くこともできるので、最終的には</p>

    <pre class="code prettyprint lang-perl">&#39;&#39;=~&#39;文字列&#39;</pre>
<p>という形式で任意の文字列を記号だけで表現できれば良い、ということになります。<br />
この時点で"'"もしくは'"'(シングルクォートもしくはダブルクォート)、"="(イコール)、"~"(チルダ)、の3種類が必須になります。Binding Operatorとして"=~"ではなく"!~"を用いることもできますが、ここでは"=~"を使います。<br />
また、文字列の連結に"."(ドット)、それらを括るために"("、")"(カッコx2)が必要になります。ここまでで6種類。そして文字列同士の論理演算を行うために"&", "|", "^"のいずれかを用います。<br />
全部で7種類、これら「必須」のものだけを用いて記号プログラムを作成できるでしょうか？</p>

</div>
<div class="section">
    <h3>■変換表を作ってみる</h3>
    <p>最も多いパターンを作りやすい排他的論理和演算子"^"を使って、クォート以外の6種類の文字同士を組み合わせて作れる文字を調べてみます。</p>

    <pre class="code prettyprint lang-perl">#!/usr/bin/perl
use strict;
use warnings;

my $dict = do {
    my $dict = +{};
    my @chars = (qw/= ~ ( ) . ^/);

    for my $c1 (@chars) {
        $dict-&gt;{$c1}++;
        for my $c2 (@chars) {
            $dict-&gt;{$c1 ^ $c2}++;
            for my $c3 (@chars) {
                $dict-&gt;{$c1 ^ $c2 ^ $c3}++;
                for my $c4 (@chars) {
                    $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4}++;
                    for my $c5 (@chars) {
                        $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4 ^ $c5}++;
                        for my $c6 (@chars) {
                            $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4 ^ $c5 ^ $c6}++;
                        }
                    }
                }
            }
        }
    }

    $dict;
};

print join(&#39; &#39;, map ord, sort keys %$dict), &#34;\n&#34;;
print scalar keys %$dict, &#34;\n&#34;;</pre>

    <pre class="code prettyprint">0 1 6 7 8 9 14 15 18 19 20 21 26 27 28 29 32 33 38 39 40 41 46 47 50 51 52 53 58 59 60 61 66 67 68 69 74 75 76 77 80 81 86 87 88 89 94 95 98 99 100 101 106 107 108 109 112 113 118 119 120 121 126 127
64</pre>
<p>6重ループまで回してみましたが、残念ながら"\x00"~"\x7F"の128種類のうち64種類までしかできませんでした。7重に増やしても効果がありません。<br />
このままでは"?"の文字を表現することすら出来ません。悔しいですね…！</p>

</div>
<div class="section">
    <h3>■文字列"1"を作る</h3>
    <p>「せめてもう一文字、使えるものがあれば！」ということで、使える文字を一文字増やすことにします。<br />
我々には"="記号を使う権利があります。"=="という比較演算子として使えば、真偽値 0 もしくは 1 を得ることができますね。この 0 もしくは 1 を文字列として使うことができればハッピーになれるのではないでしょうか。</p>

    <pre class="code prettyprint lang-perl">print &#39;&#39;==&#39;&#39;</pre>
<p>これで"1"という出力が得られます。ただ、それを文字列として使うつもりで</p>

    <pre class="code prettyprint lang-perl">print &#39;~&#39;^(&#39;&#39;==&#39;&#39;)</pre>
<p>とやっても、残念ながら"1"が出力されるだけです。どうやら「数値の1」として排他的論理和が計算されてしまっているようです。ので、</p>

    <pre class="code prettyprint lang-perl">print &#39;~&#39;^(&#39;&#39;.(&#39;&#39;==&#39;&#39;))</pre>
<p>と書くことにします。こうすることで、空文字列に"1"を連結した、「文字列の"1"」と文字列"~"の排他的論理和として"O"が出力されます。</p>

</div>
<div class="section">
    <h3>■改めて変換表を作ってみる</h3>
    <p>以上をふまえて、文字列"1"も使える前提で改めて変換表を作ってみます。</p>

    <pre class="code prettyprint lang-perl">#!/usr/bin/perl
use strict;
use warnings;

my $dict = do {
    my $dict = +{};
    my @chars = (qw/= ~ ( ) . ^ 1/); # &#39;1&#39;も使える！

    for my $c1 (@chars) {
        $dict-&gt;{$c1}++;
        for my $c2 (@chars) {
            $dict-&gt;{$c1 ^ $c2}++;
            for my $c3 (@chars) {
                $dict-&gt;{$c1 ^ $c2 ^ $c3}++;
                for my $c4 (@chars) {
                    $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4}++;
                    for my $c5 (@chars) {
                        $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4 ^ $c5}++;
                        for my $c6 (@chars) {
                            $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4 ^ $c5 ^ $c6}++;
                            for my $c7 (@chars) {
                                $dict-&gt;{$c1 ^ $c2 ^ $c3 ^ $c4 ^ $c5 ^ $c6 ^ $c7}++;
                            }
                        }
                    }
                }
            }
        }
    }

    $dict;
};

print join(&#39; &#39;, map ord, sort keys %$dict), &#34;\n&#34;;
print scalar keys %$dict, &#34;\n&#34;;</pre>

    <pre class="code prettyprint">0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127
128</pre>
<p>ktkr!! 見事に"\x00"~"\x7F"までのすべての文字を表現することができました。これで勝つる！</p>

</div>
<div class="section">
    <h3>■すべての文字列を7種類の記号で表現する</h3>
    <p>ここまで出来れば、あと少しです。上記のものを少し改良して、以下のようなものを作ります。</p>

    <pre class="code prettyprint lang-perl">my $dict = +{
    0   =&gt; [&#39;^&#39;,&#39;^&#39;],
    1   =&gt; [&#39;)&#39;,&#39;(&#39;],
    2   =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    3   =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    4   =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    5   =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    6   =&gt; [&#39;.&#39;,&#39;(&#39;],
    7   =&gt; [&#39;.&#39;,&#39;)&#39;],
    8   =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;~&#39;],
    9   =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;~&#39;],
    10  =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    11  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;=&#39;,&#39;1&#39;],
    12  =&gt; [&#39;=&#39;,&#39;1&#39;],
    13  =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    14  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;~&#39;],
    15  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;],
    16  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    17  =&gt; [&#39;^&#39;,&#39;~&#39;,&#39;1&#39;],
    18  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;],
    19  =&gt; [&#39;.&#39;,&#39;=&#39;],
    20  =&gt; [&#39;)&#39;,&#39;=&#39;],
    21  =&gt; [&#39;(&#39;,&#39;=&#39;],
    22  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;1&#39;],
    23  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    24  =&gt; [&#39;)&#39;,&#39;1&#39;],
    25  =&gt; [&#39;(&#39;,&#39;1&#39;],
    26  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;],
    27  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    28  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    29  =&gt; [&#39;^&#39;,&#39;~&#39;,&#39;=&#39;],
    30  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;1&#39;],
    31  =&gt; [&#39;.&#39;,&#39;1&#39;],
    32  =&gt; [&#39;^&#39;,&#39;~&#39;],
    33  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;],
    34  =&gt; [&#39;.&#39;,&#39;=&#39;,&#39;1&#39;],
    35  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    36  =&gt; [&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    37  =&gt; [&#39;)&#39;,&#39;=&#39;,&#39;1&#39;],
    38  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;~&#39;],
    39  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;~&#39;],
    40  =&gt; [&#39;(&#39;],
    41  =&gt; [&#39;)&#39;],
    42  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    43  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    44  =&gt; [&#39;^&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    45  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    46  =&gt; [&#39;.&#39;],
    47  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;],
    48  =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;1&#39;],
    49  =&gt; [&#39;1&#39;],
    50  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    51  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;~&#39;,&#39;=&#39;],
    52  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;],
    53  =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    54  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;1&#39;],
    55  =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;1&#39;],
    56  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;~&#39;,&#39;1&#39;],
    57  =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    58  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;=&#39;],
    59  =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;=&#39;],
    60  =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;=&#39;],
    61  =&gt; [&#39;=&#39;],
    62  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    63  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;~&#39;,&#39;1&#39;],
    64  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;1&#39;],
    65  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;1&#39;],
    66  =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    67  =&gt; [&#39;~&#39;,&#39;=&#39;],
    68  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;],
    69  =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    70  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;1&#39;],
    71  =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;1&#39;],
    72  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;1&#39;],
    73  =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    74  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;=&#39;],
    75  =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;=&#39;],
    76  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;],
    77  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;=&#39;],
    78  =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    79  =&gt; [&#39;~&#39;,&#39;1&#39;],
    80  =&gt; [&#39;.&#39;,&#39;~&#39;],
    81  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;],
    82  =&gt; [&#39;^&#39;,&#39;=&#39;,&#39;1&#39;],
    83  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    84  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    85  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;=&#39;,&#39;1&#39;],
    86  =&gt; [&#39;(&#39;,&#39;~&#39;],
    87  =&gt; [&#39;)&#39;,&#39;~&#39;],
    88  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;],
    89  =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;],
    90  =&gt; [&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    91  =&gt; [&#39;)&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    92  =&gt; [&#39;.&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    93  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    94  =&gt; [&#39;^&#39;],
    95  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;],
    96  =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    97  =&gt; [&#39;.&#39;,&#39;~&#39;,&#39;1&#39;],
    98  =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;],
    99  =&gt; [&#39;^&#39;,&#39;=&#39;],
    100 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;=&#39;],
    101 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;=&#39;],
    102 =&gt; [&#39;)&#39;,&#39;~&#39;,&#39;1&#39;],
    103 =&gt; [&#39;(&#39;,&#39;~&#39;,&#39;1&#39;],
    104 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;1&#39;],
    105 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;(&#39;,&#39;1&#39;],
    106 =&gt; [&#39;)&#39;,&#39;~&#39;,&#39;=&#39;],
    107 =&gt; [&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    108 =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;],
    109 =&gt; [&#39;.&#39;,&#39;~&#39;,&#39;=&#39;],
    110 =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;(&#39;,&#39;1&#39;],
    111 =&gt; [&#39;^&#39;,&#39;1&#39;],
    112 =&gt; [&#39;^&#39;,&#39;.&#39;],
    113 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;],
    114 =&gt; [&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    115 =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    116 =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    117 =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;~&#39;,&#39;=&#39;,&#39;1&#39;],
    118 =&gt; [&#39;^&#39;,&#39;(&#39;],
    119 =&gt; [&#39;^&#39;,&#39;)&#39;],
    120 =&gt; [&#39;.&#39;,&#39;(&#39;,&#39;~&#39;],
    121 =&gt; [&#39;.&#39;,&#39;)&#39;,&#39;~&#39;],
    122 =&gt; [&#39;^&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    123 =&gt; [&#39;^&#39;,&#39;)&#39;,&#39;=&#39;,&#39;1&#39;],
    124 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;=&#39;,&#39;1&#39;],
    125 =&gt; [&#39;^&#39;,&#39;.&#39;,&#39;)&#39;,&#39;(&#39;,&#39;=&#39;,&#39;1&#39;],
    126 =&gt; [&#39;~&#39;],
    127 =&gt; [&#39;)&#39;,&#39;(&#39;,&#39;~&#39;]
};</pre>
<p>これを使って、すべての文字列を記号化するサブルーチンを定義します。1byteずつ分解して上の変換表に従って変換します。"\x80"~"\xFF"の文字については、"~"をつけてビット反転してやれば良いだけです。簡単ですね。</p>

    <pre class="code prettyprint lang-perl">sub symbolize {
    my $str = shift;

    my @results;
    for my $char (unpack &#39;W*&#39;, $str) {
        my $reverse = 0;
        if ($char &gt;= 128) {
            $reverse = 1;
            $char = 255 - $char;
        }
        my $chars = $dict-&gt;{$char};
        my $result = ($reverse ? &#39;~&#39; : &#39;&#39;) . q{(&#39;} . join(q{&#39;^&#39;}, shuffle @$chars) . q{&#39;)};
        $result =~ s/&#39;1&#39;/(&#39;&#39;==&#39;&#39;).&#39;&#39;/g;
        push @results, $result;
    }

    return join &#39;.&#39;, @results;
}</pre>

</div>
<div class="section">
    <h3>■できあがり</h3>
    <p>ためしに、"はろーわーるど！"とutf-8で表示する記号プログラムを作ってみます。</p>

    <pre class="code prettyprint lang-perl">print q/&#39;&#39;=~(/ . symbolize(qq/(?{print&#34;はろーわーるど！\n&#34;})/), q/)/;</pre>

    <pre class="code prettyprint lang-perl">&#39;&#39;=~((&#39;(&#39;).((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;^&#39;^&#39;~&#39;^&#39;.&#39;).((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;^&#39;^&#39;^&#39;)&#39;).(&#39;^&#39;^&#39;.&#39;).(&#39;=&#39;^&#39;~&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).(&#39;(&#39;^&#39;^&#39;^&#39;.&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).(&#39;(&#39;^&#39;^&#39;^&#39;)&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).(&#39;~&#39;^&#39;(&#39;^&#39;=&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;.&#39;).((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;^&#39;.&#39;).~(&#39;~&#39;^&#39;^&#39;^&#39;(&#39;^&#39;)&#39;^&#39;=&#39;).~(&#39;~&#39;).~(&#39;.&#39;^&#39;~&#39;).~(&#39;^&#39;^&#39;(&#39;^&#39;~&#39;^&#39;=&#39;^&#39;)&#39;).~(&#39;.&#39;^&#39;=&#39;^&#39;(&#39;^&#39;^&#39;^&#39;)&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).~((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;~&#39;^&#39;=&#39;).~(&#39;=&#39;^&#39;(&#39;^&#39;)&#39;^&#39;^&#39;^&#39;~&#39;).~(&#39;.&#39;^&#39;^&#39;^&#39;=&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).~(&#39;=&#39;^&#39;~&#39;).~(&#39;^&#39;^&#39;~&#39;^&#39;)&#39;^&#39;=&#39;^&#39;(&#39;).~((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;^&#39;)&#39;^&#39;(&#39;^&#39;^&#39;^&#39;.&#39;).~(&#39;^&#39;^&#39;.&#39;).~(&#39;^&#39;^&#39;=&#39;^&#39;)&#39;^&#39;~&#39;^&#39;(&#39;).~(&#39;^&#39;^&#39;.&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;).~(&#39;~&#39;^&#39;=&#39;).~(&#39;=&#39;^&#39;^&#39;^&#39;~&#39;^&#39;)&#39;^&#39;(&#39;).~(&#39;)&#39;^&#39;^&#39;^&#39;.&#39;^&#39;(&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;).~(&#39;~&#39;^&#39;.&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;^&#39;(&#39;).~(&#39;~&#39;^&#39;=&#39;^&#39;)&#39;^&#39;^&#39;^&#39;(&#39;).~(&#39;~&#39;).~(&#39;(&#39;^&#39;~&#39;).~(&#39;)&#39;^&#39;^&#39;^&#39;(&#39;^&#39;~&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;).~(&#39;=&#39;^&#39;~&#39;).~(&#39;~&#39;).(&#39;(&#39;^&#39;.&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;).(&#39;.&#39;^(&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;=&#39;).((&#39;&#39;==&#39;&#39;).&#39;&#39;^&#39;)&#39;^&#39;.&#39;^&#39;=&#39;^&#39;(&#39;^&#39;^&#39;).(&#39;)&#39;))</pre>
<p>ちゃんと実行できる7記号のみによるPerlプログラムができましたね！</p>

</div>
<div class="section">
    <h3>■まとめ</h3>
    <p>今回作成した、任意のPerlスクリプトを7種類の記号だけのプログラムに変換するためのスクリプトを<a href="https://gist.github.com/raw/737880/133d464e8d7f25af3188ef71ae44e458eecea48a/gistfile1.pl">&#x3053;&#x3061;&#x3089;</a>に置いておきました(<a href="https://gist.github.com/737880#file_gistfile2.pl">&#x3053;&#x3061;&#x3089;</a>にも念のため)。</p>

<ul>
<li>キーボードの故障などにより、どうしても7種類の記号しか入力できなくなってしまった</li>
<li>Perlって'$'とか'@'とか'%'とかついててキモいよねー、という人に反論したい</li>
<li>Perlって末尾に';'ついててダサいよねー、という人に反論したい</li>
</ul><p>といった際にお役に立てればと思います。</p>

</div>
        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
