<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Acme::BrainfucktoryでBrainf*ckをもっと簡単に - Articles Advent Calendar 2010 Acme</title>
        <meta name="title" content="Acme::BrainfucktoryでBrainf*ckをもっと簡単に - Articles Advent Calendar 2010 Acme">
        <meta name="description" content="">
        <meta name="author" content="makamaka">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://perl-users.jp/articles/advent-calendar/2010/acme/17">
        <meta property="og:title" content="Acme::BrainfucktoryでBrainf*ckをもっと簡単に - Articles Advent Calendar 2010 Acme">
        <meta property="og:description" content="">
        <meta property="og:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Acme%3A%3ABrainfucktory%E3%81%A7Brainf%2Ack%E3%82%92%E3%82%82%E3%81%A3%E3%81%A8%E7%B0%A1%E5%8D%98%E3%81%AB,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:makamaka,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://perl-users.jp/articles/advent-calendar/2010/acme/17">
        <meta property="twitter:title" content="Acme::BrainfucktoryでBrainf*ckをもっと簡単に - Articles Advent Calendar 2010 Acme">
        <meta property="twitter:description" content="">
        <meta property="twitter:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Acme%3A%3ABrainfucktory%E3%81%A7Brainf%2Ack%E3%82%92%E3%82%82%E3%81%A3%E3%81%A8%E7%B0%A1%E5%8D%98%E3%81%AB,co_rgb:000000,w_900,c_fit/l_text:NotoSansJP-Black.otf_30_bold:makamaka,co_rgb:000000,g_south_east,x_130,y_120/v1601626948/og-perl-users-jp.png">

        <link rel="icon" href="/img/favicon.ico">
        <link rel="canonical" href="https://perl-users.jp/articles/advent-calendar/2010/acme/17">
        <link href="TODO" rel="stylesheet">
    </head>
    <body>
        <h1>Acme::BrainfucktoryでBrainf*ckをもっと簡単に</h1>
        tag
            <a href='/tag/perl'>perl</a>
            <a href='/tag/acme'>acme</a>

        <p>(firstly written in Japanese, later in English)</p><p>こんにちは。もうだいたい持っているネタは尽きかけてる<a href="http://twitter.com/maka2_donzoko">makamaka</a>です。</p><p>今日は以前作った<a href="https://github.com/makamaka/p5-acme-brainfucktory">Acme::Brainfucktory</a>について記事を書きます。このモジュールはAcme::Brainfuck系のモジュールをお手軽につくるためのモジュールです。なお、Brainf*ckについては素晴らしいことに<a href="/articles/advent-calendar/2010/sym/1">sym track 1日目</a>でも取り上げられていますので、そちらをご参照ください。</p><p>さて、CPANには<a href="http://search.cpan.org/dist/Acme-Brainfuck/">Acme::Brainfuck</a>、<a href="http://search.cpan.org/dist/Acme-Ook/">Acme::Ook</a>などのbrainfuck系Acmeモジュールがいくつかあります。またAcmeではなくLanguage系モジュールとして<a href="http://search.cpan.org/dist/Language-BF/">Language::BF</a>（brainfuckを扱う）さえあります。</p><p>で、これらは基本的に8種類のコードとオペレーションが対応しているだけですから、もっと汎用的なものにしておけば、わざざ新しいものをつくる必要もないですね。そこでBrainfuckの工場、Acme::Brainfucktoryの登場です（なおインタフェースと基本コードの多くはLanguage::BFのコピペです）。</p>

    <pre class="code prettyprint lang-perl">use strict;
use Acme::Brainfucktory;

my $bf = Acme::Brainfucktory-&gt;new();

$bf-&gt;code(&lt;&lt;CODE);
++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]
&gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;
.+++.------.--------.&gt;+.&gt;.
CODE

$bf-&gt;run; # &#34;Hello World!\n&#34;</pre>
<p>これは、基本形ですね。<br />
しかし、ちょっと引数に値を渡してあげるだけで</p>

    <pre class="code prettyprint lang-perl">my $ook = Acme::Brainfucktory-&gt;new( {
    preprocess =&gt; sub {
        my $code_ref = shift;
        $$code_ref =~ s{Ook(.) Ook(.)}{$1$2}g;
    },
    optable =&gt; {
        &#39;.?&#39; =&gt; &#39;&gt;&#39;,
        &#39;?.&#39; =&gt; &#39;&lt;&#39;,
        &#39;..&#39; =&gt; &#39;+&#39;,
        &#39;!!&#39; =&gt; &#39;-&#39;,
        &#39;!.&#39; =&gt; &#39;.&#39;,
        &#39;.!&#39; =&gt; &#39;,&#39;,
        &#39;!?&#39; =&gt; &#39;[&#39;,
        &#39;?!&#39; =&gt; &#39;]&#39;,
    },
} );

$ook-&gt;code(&lt;&lt;CODE);
Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook.
Ook! Ook. Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook?
Ook! Ook! Ook? Ook! Ook? Ook. Ook. Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook! Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook! Ook. Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook. Ook! Ook.
Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook.
Ook? Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook! Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook.
Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook!
Ook! Ook. Ook. Ook? Ook. Ook? Ook. Ook. Ook! Ook. 
CODE

$ook-&gt;run; # &#34;Hello World!&#34;;</pre>
<p>Acme::Ook（オランウータン用言語）に早変わり。さらにNekoMimiF*ck<a href="#fn1" title="tokuhirom氏のNekoMimiFu**で知りました">*1</a>もご覧の通り。</p>

    <pre class="code prettyprint lang-perl">my $nekomimi = Acme::Brainfucktory-&gt;new( {
    optable =&gt; {
        &#39;ネコミミ！&#39;                    =&gt; &#39;&gt;&#39;,
        &#39;ネコミミモード&#39;                =&gt; &#39;&lt;&#39;,
        &#39;おにいさま&#39;                    =&gt; &#39;+&#39;,
        &#39;私のしもべー&#39;                  =&gt; &#39;-&#39;,
        &#39;や・く・そ・く・よ&#39;            =&gt; &#39;.&#39;,
        &#39;フルフルフルムーン&#39;            =&gt; &#39;,&#39;,
        &#39;キスキス…&#39;                    =&gt; &#39;[&#39;,
        &#39;キス…したくなっちゃった…&#39;    =&gt; &#39;]&#39;,
    },
} );

$nekomimi-&gt;code(&lt;&lt;CODE);
おにいさまおにいさまおにいさまおにいさまキスキス…
ネコミミ！おにいさまおにいさま
おにいさまおにいさまキスキス…ネコミミ！
おにいさまおにいさまおにいさまおにいさま
ネコミミ！おにいさまおにいさまおにいさま
おにいさまおにいさまおにいさまネコミミ！
おにいさまおにいさまネコミミモードネコミミモード
ネコミミモード私のしもべー
キス…したくなっちゃった…ネコミミ！
おにいさまおにいさまネコミミ！
おにいさま
ネコミミモードネコミミモードネコミミモード
私のしもべーキス…したくなっちゃった…
ネコミミ！ネコミミ！や・く・そ・く・よネコミミ！
おにいさまや・く・そ・く・よ
おにいさまおにいさまおにいさまおにいさまおにいさま
おにいさまおにいさま
や・く・そ・く・よや・く・そ・く・よ
おにいさまおにいさまおにいさま
や・く・そ・く・よ
ネコミミ！や・く・そ・く・よ
ネコミミモードネコミミモード私のしもべー
ネコミミモード
おにいさまおにいさまおにいさまおにいさまキスキス…ネコミミ！
おにいさまおにいさまおにいさまおにいさまネコミミモード
私のしもべーキス…したくなっちゃった…ネコミミ！
や・く・そ・く・よネコミミ！や・く・そ・く・よおにいさまおにいさま
おにいさま
や・く・そ・く・よ私のしもべー私のしもべー私のしもべー私のしもべー
私のしもべー
私のしもべーや・く・そ・く・よ私のしもべー私のしもべー私のしもべー
私のしもべー
私のしもべー私のしもべー私のしもべー私のしもべーや・く・そ・く・よ
ネコミミ！
おにいさまや・く・そ・く・よ
CODE

$nekomimi-&gt;run; # &#34;Hello World!&#34;;</pre>
<p><br />
また、このモジュールはデフォルトでbrainf*ckというファンクションをエクスポートします。</p>

    <pre class="code prettyprint lang-perl">use strict;
use Acme::Brainfucktory;

$bf = brainf*ck; # = Acme::Brainfucktory-&gt;new</pre>
<p>ちょっと嬉しい機能ですね！</p><p>はい、このお正月はこたつに入ってbrainf*ckな新言語を……どうでもいいや。</p><br />
<br />
<br />
<p> * ----------------------------------------------------<br />
 * English version<br />
 * ----------------------------------------------------<br />
TITLE: Easy Brainf*ck with Acme::Brainfucktory</p><p>Hello, this is <a href="http://twitter.com/maka2_donzoko">makamaka</a>.</p><p>I introduce <a href="https://github.com/makamaka/p5-acme-brainfucktory">Acme::Brainfucktory</a> today. It is a module for making Acme::Brainfuck-like module easily. For Brainf*ck detail, please see to <a href="/articles/advent-calendar/2010/sym/1">sym track 1st day</a>.</p><p>On CPAN, there are <a href="http://search.cpan.org/dist/Acme-Brainfuck/">Acme::Brainfuck</a>, <a href="http://search.cpan.org/dist/Acme-Ook/">Acme::Ook</a> and so on. And <a href="http://search.cpan.org/dist/Language-BF/">Language::BF</a> even exists.</p><p>Since thoese languages have basically only eight commands, we don't need new modules by the generalizatoin.<br />
It is Acme::Brainfucktory, a factory of Brainfuck (its interface and many codes are copied from Language::BF).</p><p></p>

    <pre class="code prettyprint lang-perl">use strict;
use Acme::Brainfucktory;

my $bf = Acme::Brainfucktory-&gt;new();

$bf-&gt;code(&lt;&lt;CODE);
++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]
&gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;
.+++.------.--------.&gt;+.&gt;.
CODE

$bf-&gt;run; # &#34;Hello World!\n&#34;</pre>
<p>Basic. And you can pass options to the constructor.</p><p></p>

    <pre class="code prettyprint lang-perl">my $ook = Acme::Brainfucktory-&gt;new( {
    preprocess =&gt; sub {
        my $code_ref = shift;
        $$code_ref =~ s{Ook(.) Ook(.)}{$1$2}g;
    },
    optable =&gt; {
        &#39;.?&#39; =&gt; &#39;&gt;&#39;,
        &#39;?.&#39; =&gt; &#39;&lt;&#39;,
        &#39;..&#39; =&gt; &#39;+&#39;,
        &#39;!!&#39; =&gt; &#39;-&#39;,
        &#39;!.&#39; =&gt; &#39;.&#39;,
        &#39;.!&#39; =&gt; &#39;,&#39;,
        &#39;!?&#39; =&gt; &#39;[&#39;,
        &#39;?!&#39; =&gt; &#39;]&#39;,
    },
} );

$ook-&gt;code(&lt;&lt;CODE);
Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook.
Ook! Ook. Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook?
Ook! Ook! Ook? Ook! Ook? Ook. Ook. Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook. Ook! Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook! Ook. Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook. Ook! Ook.
Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook! Ook? Ook? Ook. Ook. Ook.
Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook. Ook? Ook! Ook! Ook? Ook! Ook? Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook.
Ook? Ook. Ook? Ook. Ook? Ook. Ook? Ook. Ook! Ook. Ook. Ook. Ook. Ook. Ook. Ook.
Ook! Ook. Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook.
Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook! Ook!
Ook! Ook. Ook. Ook? Ook. Ook? Ook. Ook. Ook! Ook. 
CODE

$ook-&gt;run; # &#34;Hello World!&#34;;</pre>
<p>It was changed to Acme::Ook(orang-utans language). And NekoMimiF*ck<a href="#fn2" title="I know this language from tokuhirom's NekoMimiFu**.">*2</a>!</p>

    <pre class="code prettyprint lang-perl">my $nekomimi = Acme::Brainfucktory-&gt;new( {
    optable =&gt; {
        &#39;ネコミミ！&#39;                    =&gt; &#39;&gt;&#39;,
        &#39;ネコミミモード&#39;                =&gt; &#39;&lt;&#39;,
        &#39;おにいさま&#39;                    =&gt; &#39;+&#39;,
        &#39;私のしもべー&#39;                  =&gt; &#39;-&#39;,
        &#39;や・く・そ・く・よ&#39;            =&gt; &#39;.&#39;,
        &#39;フルフルフルムーン&#39;            =&gt; &#39;,&#39;,
        &#39;キスキス…&#39;                    =&gt; &#39;[&#39;,
        &#39;キス…したくなっちゃった…&#39;    =&gt; &#39;]&#39;,
    },
} );

$nekomimi-&gt;code(&lt;&lt;CODE);
おにいさまおにいさまおにいさまおにいさまキスキス…
ネコミミ！おにいさまおにいさま
おにいさまおにいさまキスキス…ネコミミ！
おにいさまおにいさまおにいさまおにいさま
ネコミミ！おにいさまおにいさまおにいさま
おにいさまおにいさまおにいさまネコミミ！
おにいさまおにいさまネコミミモードネコミミモード
ネコミミモード私のしもべー
キス…したくなっちゃった…ネコミミ！
おにいさまおにいさまネコミミ！
おにいさま
ネコミミモードネコミミモードネコミミモード
私のしもべーキス…したくなっちゃった…
ネコミミ！ネコミミ！や・く・そ・く・よネコミミ！
おにいさまや・く・そ・く・よ
おにいさまおにいさまおにいさまおにいさまおにいさま
おにいさまおにいさま
や・く・そ・く・よや・く・そ・く・よ
おにいさまおにいさまおにいさま
や・く・そ・く・よ
ネコミミ！や・く・そ・く・よ
ネコミミモードネコミミモード私のしもべー
ネコミミモード
おにいさまおにいさまおにいさまおにいさまキスキス…ネコミミ！
おにいさまおにいさまおにいさまおにいさまネコミミモード
私のしもべーキス…したくなっちゃった…ネコミミ！
や・く・そ・く・よネコミミ！や・く・そ・く・よおにいさまおにいさま
おにいさま
や・く・そ・く・よ私のしもべー私のしもべー私のしもべー私のしもべー
私のしもべー
私のしもべーや・く・そ・く・よ私のしもべー私のしもべー私のしもべー
私のしもべー
私のしもべー私のしもべー私のしもべー私のしもべーや・く・そ・く・よ
ネコミミ！
おにいさまや・く・そ・く・よ
CODE

$nekomimi-&gt;run; # &#34;Hello World!&#34;;</pre>
<p>Additionally, this module exports brainf*ck function by default.</p>

    <pre class="code prettyprint lang-perl">use strict;
use Acme::Brainfucktory;

$bf = brainf*ck; # = Acme::Brainfucktory-&gt;new</pre>
<p>Good?</p><p>Well, in this winter vacation, would you like to invent new languages.... I don't care.</p>

<div class="footnotes">
  <div class="footnote" id="fn1">*1: tokuhirom氏の<a href="http://d.hatena.ne.jp/tokuhirom/20041015/p14">NekoMimiFu**</a>で知りました</div>
  <div class="footnote" id="fn2">*2: I know this language from tokuhirom's <a href="http://d.hatena.ne.jp/tokuhirom/20041015/p14">NekoMimiFu**</a>.</div>
</div>

        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
