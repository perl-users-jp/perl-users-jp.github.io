<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Net::DNS::Lite - a module for handling timeout of hostname lookups safely, and more - Articles Advent Calendar 2010 English</title>
        <meta name="title" content="Net::DNS::Lite - a module for handling timeout of hostname lookups safely, and more - Articles Advent Calendar 2010 English">
        <meta name="description" content="">
        <meta name="author" content="">

        <meta property="og:type" content="website">
        <meta property="og:url" content="https://perl-users.jp/articles/advent-calendar/2010/english/16">
        <meta property="og:title" content="Net::DNS::Lite - a module for handling timeout of hostname lookups safely, and more - Articles Advent Calendar 2010 English">
        <meta property="og:description" content="">
        <meta property="og:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Net%3A%3ADNS%3A%3ALite%20-%20a%20module%20for%20handling%20timeout%20of%20hostname%20lookups%20safely%25E2%2580%259A%20and%20more,co_rgb:000000,w_900,c_fit//v1601626948/og-perl-users-jp.png">

        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://perl-users.jp/articles/advent-calendar/2010/english/16">
        <meta property="twitter:title" content="Net::DNS::Lite - a module for handling timeout of hostname lookups safely, and more - Articles Advent Calendar 2010 English">
        <meta property="twitter:description" content="">
        <meta property="twitter:image" content="https://res.cloudinary.com/kfly8/image/upload/l_text:NotoSansJP-Black.otf_50_bold:Net%3A%3ADNS%3A%3ALite%20-%20a%20module%20for%20handling%20timeout%20of%20hostname%20lookups%20safely%25E2%2580%259A%20and%20more,co_rgb:000000,w_900,c_fit//v1601626948/og-perl-users-jp.png">

        <link rel="icon" href="/img/favicon.ico">
        <link rel="canonical" href="https://perl-users.jp/articles/advent-calendar/2010/english/16">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.min.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <header class="site-header">
    <a href="/" class="logo">Perl-users.jp</a>
</header>

        <main class="entry">
        <h1 class="entry-title">Net::DNS::Lite - a module for handling timeout of hostname lookups safely, and more</h1>
        <div class="entry-tags">
        </div>
            <div class="entry-date">2010-12-16</div>

        <div class="entry-text">
            <p>Hostname lookup functions (like inet_aton) are one of the functions that aren't cancellable, and that makes hard to set timeouts within perl scripts that connect to other servers.</p><p><a href="http://search.cpan.org/dist/Net-DNS-Lite/">Net::DNS::Lite</a> is a port of <a href="search.cpan.org/perldoc?AnyEvent::DNS">AnyEvent::DNS</a> without dependency on AnyEvent, intended to be used in ordinally perl scripts not event-driven.</p><p>The easiest way to use the function is to override the core inet_aton with the one provided by Net::DNS::Lite.  The following example does the replacement, and then uses the local variable to set the timeout.</p>

    <pre class="code prettyprint lang-perl">use Net::DNS::Lite;

*CORE::GLOBAL::inet_aton = Net::DNS::Lite::inet_aton;
...

sub dowhatever {
    ...
    local $Net::DNS::Lite::TIMEOUT = $timeout_secs;
    communicate_with_server();
    ...
}</pre>
<p>It is not only a replacement-with-timeout function for inet_aton but also has support for caching the responses from DNS servers as well so you can expect performance improvements by using the module as well.  Please see the POD for more detail.</p>

        </div>
        </main>
        <footer class="site-footer">
    <nav>
        <a href="https://github.com/perl-users-jp/perl-users-jp.github.io" target="_blank" rel="noopener">
            <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        </a>
    </nav>
    <p>
        <a href="/">Perl-users.jp</a> - 日本のPerlユーザーのためのハブサイトです。日本の Perl ユーザーに最新の情報を届けることを目的にしています。
    </p>
    <p>
    文章のライセンスは、特に明記が無い限りすべて <a href="http://creativecommons.org/licenses/by/2.0/">CC-by</a>でおねがいします。
    </p>
</footer>

        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
