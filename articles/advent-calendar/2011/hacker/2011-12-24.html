<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="dukkiedukkie <dukkiedukkie@yahoo.co.jp>">
        <meta name="author" content="dukkiedukkie <dukkiedukkie@yahoo.co.jp>">
        <title>BokkaKumiai: 音楽のコード進行解析とギタータブ譜出力 - Articles Advent Calendar 2011 Hacker</title>
        <link rel="icon" href="/img/favicon.ico">
        <link href="TODO" rel="stylesheet">
    </head>
    <body>
        <h1>BokkaKumiai: 音楽のコード進行解析とギタータブ譜出力</h1>

        
<div class="section">
    <h4>はじめに</h4>
    <p>Merry Christmas (EVE)!! dukkiedukkieです。 みなさん、意識は高まっていますか？私はぼちぼちです。寒いので(^^ゞ<br />
パッヘルベルのカノンが街でしとやかに奏でられるシーズン到来ですね。</p><p>今日は最近作り始めている拙作のモジュール<br />
<a href="https://github.com/dukkie/BokkaKumiai/blob/master/lib/BokkaKumiai.pm">https://github.com/dukkie/BokkaKumiai/blob/master/lib/BokkaKumiai.pm</a><br />
BokkaKumiai について書かせて下さいm(_ _)m。</p><p></p>

</div>
<div class="section">
    <h4>パッヘルベルのカノンと同じコード進行の曲</h4>
    <p>私は「音楽の和声進行（コード進行、ChordProgression）」の解析を幼いころより趣味としておりまして、2005年ごろに「牧歌組合」というblogでCM音楽などなどのコード解析やギタータブフレーズ化を書いていたこともあります。<br />
<a href="http://ameblo.jp/dukkiedukkie/">http://ameblo.jp/dukkiedukkie/</a></p><p>唐突ですが、「音楽には二種類しかない。アーメン終止か？お辞儀終止か？」みたいな話があります。こういった帰結の暴力性はさておき、実際音楽においては「なんだか、あの曲に似ているよな。。。」みたいなデジャブ感を音楽を聴いた際に体感された方は多いことだと思います。<br />
まあ、そういう場合、プログラマにとってのデザインパターンと同様に、「音楽コード進行のデザインパターン」みたいなのが暗黙のうちに、あるいは明示的に（ブルースとか、ジャズのツーファイブとかはそういう和声進行のデザインパターンと解釈できます）使われていているから、というのが原因でアルことが多いと思います。</p><p>ハッペルベルのカノンやバッハのG線上のアリアのパターンについては、過去の私の拙文<br />
<a href="http://ameblo.jp/dukkiedukkie/entry-10001850613.html">http://ameblo.jp/dukkiedukkie/entry-10001850613.html</a><br />
<a href="http://ameblo.jp/dukkiedukkie/entry-10002373892.html">http://ameblo.jp/dukkiedukkie/entry-10002373892.html</a><br />
などをご笑覧いただければ嬉しいです。</p>

</div>
<div class="section">
    <h4>アドリブって？</h4>
    <p>私も下手くそな楽器弾きで、ギターもたまに弾いたりするのですが、上手い人やプロでセッションで食べれる人というのは、初見や初聴ですぐに適切な演奏を行えたりするものです。そういう人は真性の天才であるか、あるいは、「音楽のデザインパターンを学習により確実に身につけている」人だと思います。まあ、後者のほうが実際は多いのだと思います。ギリシャ哲学やオクターブの発見を持ち出さずとも、音楽というのは科学的なもので、ミュージシャンというのはエンジニアにも近い存在だと私は思います。</p>

</div>
<div class="section">
    <h4>キーと拍子、ビートとコード進行パターンからプレイを決める！</h4>
    <p> それをプログラムにしてみたら。。。と書き始めたのがBokkaKumiaiです。</p>

    <pre class="code lang-perl">    #Pachelbel&#39;s Canon&#39;s Guitar Tab in C.
    use BokkaKumiai;
    my $cp = BokkaKumiai-&gt;new(
        &#39;key&#39; =&gt; &#39;C&#39;,
        &#39;time&#39; =&gt; &#39;4/4&#39;,
        &#39;beat&#39; =&gt; 4,
        &#39;pattern&#39; =&gt; &#39;pachelbel&#39;,  #- &#39;Pachelbel&#39;s Canon&#39;
        &#39;bars_by_one_row&#39; =&gt; 2,
    );
    $cp-&gt;mk_chord_progress;
    $cp-&gt;print_chord_progress;
    $cp-&gt;guitar_tab;	</pre>
<p>のようにキーはC（ハ長調）、4/4拍子でパッヘルベルのカノンのコード進行パターンを呼び出すと、</p>

    <pre class="code lang-shell">Time: 4/4
Beat: 4
Key : C
| C G/B   | Am Em/G | F C/E   | F/D G7  |

   C       G/B       Am      Em/G    
   +   +   +   +     +   +   +   +   
e:-0---0---3---3---|-0---0---0---0---|
B:-1---1---0---0---|-1---1---0---0---|
G:-0---0---0---0---|-2---2---0---0---|
D:-2---2---0---0---|-2---2---2---2---|
A:-3---3---2---2---|-0---0---2---2---|
E:-X---X---3---3---|-0---0---0---0---|
   F       C/E       F/D     G7      
   +   +   +   +     +   +   +   +   
e:-1---1---0---0---|-1---1---1---1---|
B:-1---1---1---1---|-1---1---0---0---|
G:-2---2---0---0---|-2---2---0---0---|
D:-3---3---2---2---|-3---3---0---0---|
A:-3---3---3---3---|-3---3---2---2---|
E:-1---1---X---X---|-1---1---3---3---|</pre>
<p>と、ギターコード例が表示されます。キーをGにすると、</p>

    <pre class="code lang-perl">    #Pachelbel&#39;s Canon&#39;s Guitar Tab in G.
    use BokkaKumiai;
    my $cp = BokkaKumiai-&gt;new(
        &#39;key&#39; =&gt; &#39;G&#39;,
        &#39;time&#39; =&gt; &#39;4/4&#39;,
        &#39;beat&#39; =&gt; 4,
        &#39;pattern&#39; =&gt; &#39;pachelbel&#39;,  #- &#39;Pachelbel&#39;s Canon&#39;
        &#39;bars_by_one_row&#39; =&gt; 2,
    );
    $cp-&gt;mk_chord_progress;
    $cp-&gt;print_chord_progress;
    $cp-&gt;guitar_tab;	</pre>
<p>。。。</p>

    <pre class="code lang-shell">Time: 4/4
Beat: 4
Key : G
| G D/F#  | Em Bm/D | C G/B   | C/A D7  |

   G       D/F#      Em      Bm/D    
   +   +   +   +     +   +   +   +   
e:-3---3---2---2---|-0---0---2---2---|
B:-0---0---3---3---|-0---0---3---3---|
G:-0---0---2---2---|-0---0---4---4---|
D:-0---0---0---0---|-2---2---4---4---|
A:-2---2---0---0---|-2---2---2---2---|
E:-3---3---X---X---|-0---0---2---2---|
   C       G/B       C/A     D7      
   +   +   +   +     +   +   +   +   
e:-0---0---3---3---|-0---0---2---2---|
B:-1---1---0---0---|-1---1---1---1---|
G:-0---0---0---0---|-0---0---2---2---|
D:-2---2---0---0---|-2---2---0---0---|
A:-3---3---2---2---|-3---3---0---0---|
E:-X---X---3---3---|-X---X---X---X---|</pre>
<p>と出力されます。</p>

</div>
<div class="section">
    <h4>Jackson 5 "I want You Back"の場合</h4>
    <p>キーはAb, ビートはFunkらしく16ビートでBokkaKumiaiを呼び出します！</p>

    <pre class="code lang-perl">use BokkaKumiai;
my $cp = BokkaKumiai-&gt;new(
        &#39;key&#39; =&gt; &#39;Ab&#39;,
        &#39;time&#39; =&gt; &#39;8/8&#39;,
        &#39;beat&#39; =&gt; 16,
        &#39;pattern&#39; =&gt; &#39;iwantyouback&#39;,
        &#39;bars_by_one_row&#39; =&gt; 2,
);
$cp-&gt;mk_chord_progress;
$cp-&gt;print_chord_progress;</pre>
<p>マイケル・ジャクソンのクリスマスソングが聴きたいですね〜</p>

    <pre class="code lang-shell">Time: 8/8
Beat: 16
Key : Ab
| Ab      | C#      | Fm Ab/C C#M7 Ab| Bbm7 Eb7 Ab Ab|

   Ab                                C#                              
   +   -   +   -   +   -   +   -     +   -   +   -   +   -   +   -   
e:-4-4-4---4-4---4-4-4-4---4-4---4-|-4-4-4---4-4---4-4-4-4---4-4---4-|
B:-4-4-4---4-4---4-4-4-4---4-4---4-|-6-6-6---6-6---6-6-6-6---6-6---6-|
G:-5-5-5---5-5---5-5-5-5---5-5---5-|-6-6-6---6-6---6-6-6-6---6-6---6-|
D:---------------------------------|---------------------------------|
A:---------------------------------|---------------------------------|
E:---------------------------------|---------------------------------|
   Fm      Ab/C    C#M7    Ab        Bbm7    Eb7     Ab      Ab      
   +   -   +   -   +   -   +   -     +   -   +   -   +   -   +   -   
e:-1-1-1---4-4-4---4-4-4---4-4-4---|-1-1-1---6-6-6---4-4-4---4-4-4---|
B:-1-1-1---4-4-4---6-6-6---4-4-4---|-2-2-2---8-8-8---4-4-4---4-4-4---|
G:-1-1-1---5-5-5---5-5-5---5-5-5---|-1-1-1---6-6-6---5-5-5---5-5-5---|
D:---------------------------------|---------------------------------|
A:---------------------------------|---------------------------------|
E:---------------------------------|---------------------------------|</pre>
<p>てな感じで、多少ファンク・ギター・カッティングっぽくカットパターンが計算されます。</p>

</div>
<div class="section">
    <h4>これからのBokkaKumiai</h4>
    <p>ただのカッティングじゃなくて「--arpeggiate」オプションでアルペジオパターンにするとか、ベースタブ譜、ドラム譜のサンプル出力メソッドを作るとか、「--like_keithrichards」でキース・リチャーズっぽいフレーズにするとか（笑）、コード進行の組み合わせで、「空耳ケーキ」<a href="http://ameblo.jp/dukkiedukkie/entry-10002280358.html">http://ameblo.jp/dukkiedukkie/entry-10002280358.html</a>みたいな曲を解析あるいは自動作曲できるようにするとか。。。<br />
果てしない夢がありますので、よろしくお願いいたします！！！</p>

</div>
        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>
    </body>
</html>
